{"version":1,"ops":[{"type":1,"author":{"id":"81b853802ee58295b1b56dc1253b74e7b177b9de"},"timestamp":1442195521,"metadata":{"github-id":"MDU6SXNzdWUxMDYyNTY5ODI=","github-url":"https://github.com/perl11/cperl/issues/33","origin":"github"},"title":"Config.pm doesn't exist, when FindExt.pm is loaded in config_sh.PL on Win32 build","message":"```\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_EXTERNAL\n_GLOB -DPERL_IS_MINIPERL -Fo.\\mini\\utf8.obj ..\\utf8.c\nutf8.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_EXTERNAL\n_GLOB -DPERL_IS_MINIPERL -Fo.\\mini\\util.obj ..\\util.c\nutil.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_EXTERNAL\n_GLOB -DPERL_IS_MINIPERL -Fo.\\mini\\xsutils.obj ..\\xsutils.c\nxsutils.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_EXTERNAL\n_GLOB -DPERL_IS_MINIPERL -Fo.\\mini\\miniperlmain.obj ..\\miniperlmain.c\nminiperlmain.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_EXTERNAL\n_GLOB -DPERL_IS_MINIPERL -Fo.\\mini\\perlio.obj ..\\perlio.c\nperlio.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_IS_MINIP\nERL -Fo.\\mini\\win32.obj win32.c\nwin32.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_IS_MINIP\nERL -Fo.\\mini\\win32io.obj win32io.c\nwin32io.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_IS_MINIP\nERL -Fo.\\mini\\win32sck.obj win32sck.c\nwin32sck.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_IS_MINIP\nERL -Fo.\\mini\\win32thread.obj win32thread.c\nwin32thread.c\n        cl -c -nologo -GF -W3 -I..\\lib\\CORE -I.\\include -I. -I.. -DWIN32 -D_CONS\nOLE -DNO_STRICT -DPERLDLL -DPERL_CORE   -O1 -MD -Zi -DNDEBUG -GL -DPERL_IS_MINIP\nERL -Fo.\\mini\\fcrypt.obj fcrypt.c\nfcrypt.c\n        link -out:..\\miniperl.exe @C:\\WINDOWS\\TEMP\\nm1EC0.tmp\nGenerating code\nFinished generating code\nLINK : warning LNK4089: all references to 'WS2_32.dll' discarded by /OPT:REF\n        if exist ..\\miniperl.exe.manifest mt -nologo -manifest ..\\miniperl.exe.m\nanifest -outputresource:..\\miniperl.exe;1 \u0026\u0026  if exist ..\\miniperl.exe.manifest\ndel ..\\miniperl.exe.manifest\n        ..\\miniperl.exe -I..\\lib -f ..\\write_buildcustomize.pl ..\n        copy config.vc config.w32\n        1 file(s) copied.\n        ..\\miniperl.exe -I..\\lib config_sh.PL \"INST_TOP=c:\\perl\"\n         \"INST_VER=\"                     \"INST_ARCH=\"            \"archname=MSWin\n32-x86-multi-thread\"                     \"cc=cl\"\n \"ld=link\"                               \"ccflags=-nologo -GF -W3 -O1 -MD -Zi -D\nNDEBUG -GL -DWIN32 -D_CONSOLE -DNO_STRICT  -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLIC\nIT_CONTEXT -DPERL_IMPLICIT_SYS -D_USE_32BIT_TIME_T\"      \"usecplusplus=\"\n         \"cf_email=\"                     \"d_mymalloc=undef\"              \"libs=o\nldnames.lib kernel32.lib user32.lib gdi32.lib winspool.lib  comdlg32.lib advapi3\n2.lib shell32.lib ole32.lib oleaut32.lib  netapi32.lib uuid.lib ws2_32.lib mpr.l\nib winmm.lib  version.lib odbc32.lib odbccp32.lib comctl32.lib msvcrt.lib\"\n                 \"incpath=C:\\Program Files\\Microsoft Visual Studio .NET 2003\\VC7\n\\include\"                \"libperl=perl523.lib\"           \"libpth=C:\\Program File\ns\\Microsoft Visual Studio .NET 2003\\VC7\\lib;\"    \"libc=msvcrt.lib\"\n                 \"make=nmake\"                            \"static_ext=Win32CORE\"\n         \"usethreads=define\"             \"useithreads=define\"            \"usemul\ntiplicity=define\"                \"use64bitint=undef\"             \"uselongdouble=\nundef\"                   \"uselargefiles=define\"  \"usesitecustomize=undef\"\n \"LINK_FLAGS=-nologo -nodefaultlib -debug -opt:ref,icf -ltcg  -libpath:\\\"c:\\perl\n\\lib\\CORE\\\"  -machine:x86\"               \"optimize=-O1 -MD -Zi -DNDEBUG -GL\"\n         \"WIN64=undef\" config.w32 \u003e ..\\config.sh\nCan't locate Config.pm in @INC (you may need to install the Config module) (@INC\n contains: C:\\sources\\cperl\\lib C:\\sources\\cperl\\cpan\\AutoLoader\\lib C:\\sources\\\ncperl\\dist\\Carp\\lib C:\\sources\\cperl\\dist\\PathTools C:\\sources\\cperl\\dist\\PathTo\nols\\lib C:\\sources\\cperl\\cpan\\ExtUtils-Command\\lib C:\\sources\\cperl\\cpan\\ExtUtil\ns-Install\\lib C:\\sources\\cperl\\cpan\\ExtUtils-MakeMaker\\lib C:\\sources\\cperl\\cpan\n\\ExtUtils-Manifest\\lib C:\\sources\\cperl\\cpan\\File-Path\\lib C:\\sources\\cperl\\ext\\\nre C:\\sources\\cperl\\dist\\Term-ReadLine\\lib C:\\sources\\cperl\\dist\\Exporter\\lib C:\n\\sources\\cperl\\ext\\File-Find\\lib C:\\sources\\cperl\\cpan\\Text-Tabs\\lib C:\\sources\\\ncperl\\dist\\constant\\lib C:\\sources\\cperl\\cpan\\Text-ParseWords\\lib .) at FindExt.\npm line 7.\nBEGIN failed--compilation aborted at FindExt.pm line 7.\nCompilation failed in require at config_sh.PL line 3.\nBEGIN failed--compilation aborted at config_sh.PL line 3.\nNMAKE : fatal error U1077: '..\\miniperl.exe' : return code '0x2'\nStop.\n\nC:\\sources\\cperl\\win32\u003e\n```\n\ncaused by https://github.com/perl11/cperl/commit/7c3330a48d8f0671c9d048d5b066b17177128a91 \n\nwhen 'config_sh.PL' runs during the Win32 build process, 'Config.pm' doesn't exist yet. static extensions list is passed on command line to 'config_sh.PL' from the d/n/gmake process. Static extension list can't be looked up from 'config.sh' since 'static_ext' from 'config.sh' would be the canned 'static_ext' from the canned 'config.sh' for miniperl which is always empty string when  'config_sh.PL' runs. I reverted https://github.com/perl11/cperl/commit/7c3330a48d8f0671c9d048d5b066b17177128a91 in my repo so I can continue the Win32 build but some other solution will be needed.","files":null}]}