{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1486895502,"metadata":{"github-id":"MDU6SXNzdWUyMDcwNDIwMDY=","github-url":"https://github.com/perl11/cperl/issues/251","origin":"github"},"title":"c3 bug with ISA[i] = undef","message":"`t/mro/basic.t` test 26 fails with c3:\n\n```\n    {\n        package ISACLEAR;\n        our @ISA = qw/XX YY ZZ/;\n    }\n    # baseline\n    ok(eq_array(mro::get_linear_isa('ISACLEAR'),[qw/ISACLEAR XX YY ZZ/]));\n\n    # this looks dumb, but it preserves existing behavior for compatibility\n    #  (undefined @ISA elements treated as \"main\")\n    # This revealed a c3 bug (undetected since 2007)\n    $ISACLEAR::ISA[1] = undef;\n    ok(eq_array(mro::get_linear_isa('ISACLEAR'),[qw/ISACLEAR XX main ZZ/]))\n      or diag \"'\".join(\"' '\",@{mro::get_linear_isa('ISACLEAR')}).\"'\";\n```\n=\u003e \n'ISACLEAR' 'XX' 'main' 'ZZ' with dfs\n'ISACLEAR' 'XX' 'main' '' 'ZZ' with c3.\n\nNote the empty entry after the inserted/changed main. YY =\u003e main.\nThis problem existed since 2007, the initial c3 implementation. It was never tested.\n\nDetected by #209","files":null}]}