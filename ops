{"version":1,"ops":[{"type":6,"author":{"id":"7fbb39002c45ae93cebd5bb850d4ef0efa0e9c95"},"timestamp":1598598917,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0MjIwMTE5MjU="},"target":"0a285f481248902af24ad330c4915e9d80678065e9104a4c9cb352042b026519","message":"If ExifTool is used, binary compiled using perlcc depends on Config.so and cwd.so, even if [--static/--staticxs](https://metacpan.org/pod/distribution/B-C/script/perlcc.PL) is used.\nThe reason might be that [ExifTool utilizes Config.so ](https://exiftool.org/config.html).\nThe problem is that the binary compiled requires cperl installation and is not portable any more.\nThat is to say, the binary cannot run on another machine without cperl at the expected position.\n\nOutput of strace is shown below \n```\nstat(\"/usr/local/lib/cperl/5.30.0/x86_64-linux/auto/Config/Config.so\", 0x7f4f8d872ba0) = -1 ENOENT (No such file or directory)\nwrite(2, \"Error: load_file /usr/local/lib/\"..., 90Error: load_file /usr/local/lib/cperl/5.30.0/x86_64-linux/auto/Config/Config.so not found\n) = 90\n```\n\nCould you suggest how to build the \"true\" static binary under this circumstance ? Many thanks !","files":null},{"type":6,"author":{"id":"7fbb39002c45ae93cebd5bb850d4ef0efa0e9c95"},"timestamp":1598598957,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0MjIwMTIwOTM="},"target":"0a285f481248902af24ad330c4915e9d80678065e9104a4c9cb352042b026519","message":"If ExifTool is used, binary compiled using perlcc depends on Config.so and Cwd.so, even if [--static/--staticxs](https://metacpan.org/pod/distribution/B-C/script/perlcc.PL) is used.\nThe reason might be that [ExifTool utilizes Config.so ](https://exiftool.org/config.html).\nThe problem is that the binary compiled requires cperl installation and is not portable any more.\nThat is to say, the binary cannot run on another machine without cperl at the expected position.\n\nOutput of strace is shown below \n```\nstat(\"/usr/local/lib/cperl/5.30.0/x86_64-linux/auto/Config/Config.so\", 0x7f4f8d872ba0) = -1 ENOENT (No such file or directory)\nwrite(2, \"Error: load_file /usr/local/lib/\"..., 90Error: load_file /usr/local/lib/cperl/5.30.0/x86_64-linux/auto/Config/Config.so not found\n) = 90\n```\n\nCould you suggest how to build the \"true\" static binary under this circumstance ? Many thanks !","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1598615337,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MjQ4MTkwNQ==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-682481905"},"message":"A true static binary needs the Perl to be compiled static, with all modules be compiled static also. It is possible, but I never heard that anyone did that.","files":null},{"type":3,"author":{"id":"7fbb39002c45ae93cebd5bb850d4ef0efa0e9c95"},"timestamp":1598641307,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MzA4NzQzMw==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-683087433"},"message":"Is it possible to compile everything statically base on the install instruction for cperl (shown below) ? :D If yes, could you suggest which switches that one should use ? Many thanks !\n\n```\nhttp://perl11.org/cperl/\n\nINSTALL:\n\nSimple:\n\n    ./Configure -sder -Dusedevel -Dusecperl\n    make -s -j4\n    make -s -j4 test\n    sudo make install\nExperts:\n\n    ./Configure -sder -Dusedevel -Dusecperl \\\n      -Accflags='-msse4.2 -DPERL_FAKE_SIGNATURE' --optimize='-O3 -g' \\\n      -Dinstallman1dir=none -Dinstallman3dir=none -Dinstallsiteman1dir=none \\\n      -Dinstallsiteman3dir=none\n    make -s -j4 ECHO=true\n    make -s -j4 ECHO=true test\n    sudo make install\n```","files":null},{"type":6,"author":{"id":"7fbb39002c45ae93cebd5bb850d4ef0efa0e9c95"},"timestamp":1598641307,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzk2NTI2MjI4"},"target":"3525592a799fb6c3c0b0c3a1a19bf5c2299e2dc4a1b2cc3cdf0397d38da18477","message":"Is it possible to compile everything statically base on the install instruction for cperl (shown below) ? :D If yes, could you suggest which switches one should use ? Many thanks !\n\n```\nhttp://perl11.org/cperl/\n\nINSTALL:\n\nSimple:\n\n    ./Configure -sder -Dusedevel -Dusecperl\n    make -s -j4\n    make -s -j4 test\n    sudo make install\n\nExperts:\n\n    ./Configure -sder -Dusedevel -Dusecperl \\\n      -Accflags='-msse4.2 -DPERL_FAKE_SIGNATURE' --optimize='-O3 -g' \\\n      -Dinstallman1dir=none -Dinstallman3dir=none -Dinstallsiteman1dir=none \\\n      -Dinstallsiteman3dir=none\n    make -s -j4 ECHO=true\n    make -s -j4 ECHO=true test\n    sudo make install\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602360000,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNjU5NzQzOQ==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-706597439"},"message":"Also interested if one can compile cperl statically with its modules - for the goal of embedding the interpreter statically to run some scripts","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602360000,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1ODI4MDM5"},"target":"7d7b8d6a01ab27b70e6c99faf6b69a5c6665e77b24a99601659091e76ccc9c19","message":"Also interested if one can compile cperl statically with its modules - for the goal of embedding the interpreter statically to run some scripts, similar to what might (?) be accomplished with staticperl.","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602360033,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1ODI4MDcw"},"target":"7d7b8d6a01ab27b70e6c99faf6b69a5c6665e77b24a99601659091e76ccc9c19","message":"Also interested if one can compile cperl statically with its modules - for the goal of embedding the interpreter statically to run some scripts, similar to what might (?) be accomplished with staticperl. Maybe it even can be a lightweight alternative to WebPerl and compile fully into WebAssembly.","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602360668,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1ODI4NTM3"},"target":"7d7b8d6a01ab27b70e6c99faf6b69a5c6665e77b24a99601659091e76ccc9c19","message":"Also interested if one can compile cperl statically with its modules - for the goal of embedding the interpreter statically to run some scripts, similar to what might (?) be accomplished with staticperl. Maybe it even can be a lightweight alternative to WebPerl and compile fully into WebAssembly. It would also be very useful for `perlcc`","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602556566,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzQ0NzI3OA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707447278"},"message":"Here's how I tried configuring cperl to compile statically: `bash +x ./Configure -sde -Uusedl -Dprefix=$PREFIX\n[log.zip](https://github.com/perl11/cperl/files/5368608/log.zip)\n`","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602556566,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MTk1MTI3"},"target":"c4bcd238fc8833c540b8e1b846cb66526490bc4d66651d03cbcf8b748cfaedca","message":"Here's how I tried configuring cperl to compile statically: `bash +x ./Configure -sde -Uusedl -Dprefix=$PREFIX`\n[log.zip](https://github.com/perl11/cperl/files/5368608/log.zip)\n`","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602556977,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MTk2MDUx"},"target":"c4bcd238fc8833c540b8e1b846cb66526490bc4d66651d03cbcf8b748cfaedca","message":"Here's how I tried configuring cperl to compile statically: `bash +x ./Configure -sde -Uusedl -Dprefix=$PREFIX`\n[log.zip](https://github.com/perl11/cperl/files/5368608/log.zip)\n\nOn my system it breaks with:\n```\nRun make depend now? [y]\n`sh  cflags \"optimize='-O3 --pipe'\" generate_uudmap.o`  generate_uudmap.c\nld -o generate_uudmap -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe generate_uudmap.o -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nld: unrecognized option '--pipe'\nld: use the --help option for usage information\nMakefile:367: recipe for target 'generate_uudmap' failed\nmake: *** [generate_uudmap] Error 1\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602591917,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcwMjgyMg==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707702822"},"message":"@rurban I tried to compile cperl with all modules in static way: `-Dstatic_ext\"B B/C Compress/Raw/Bzip2 Compress/Raw/Zlib Config Cpanel/JSON/XS Cwd Data/Dumper Devel/NYTProf Devel/PPPort Devel/Peek Digest/MD5 Digest/SHA Encode Fcntl File/DosGlob File/Glob Filter/Util/Call Hash/Util Hash/Util/FieldHash I18N/Langinfo IO IPC/SysV Internals/DumpArenas List/Util MIME/Base64 Math/BigInt/FastCalc Opcode POSIX PerlIO/encoding PerlIO/mmap PerlIO/scalar PerlIO/via SDBM_File Socket Storable Sys/Hostname Sys/Syslog Term/ReadKey Tie/Hash/NamedCapture Time/HiRes Time/Piece Unicode/Collate Unicode/Normalize XS/APItest XS/Typemap YAML/Safe mro re threads threads/shared\"`\n\nAt the end of compilation (linking time?) I got this error:\n```\ncc -o perl -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe -Wl,-E perlmain.o  lib/auto/B/B.a lib/auto/B/C/C.a lib/auto/Compress/Raw/Bzi\np2/Bzip2.a lib/auto/Compress/Raw/Zlib/Zlib.a lib/auto/Config/Config.a lib/auto/Cpanel/JSON/XS/XS.a lib/auto/Cwd/Cwd.a lib/auto/Data/Dumper/Dumper.a \nlib/auto/Devel/NYTProf/NYTProf.a lib/auto/Devel/PPPort/PPPort.a lib/auto/Devel/Peek/Peek.a lib/auto/Digest/MD5/MD5.a lib/auto/Digest/SHA/SHA.a lib/auto/Encode/Encode.a lib/auto/Fcntl/Fcntl.a lib/auto/File/DosGlob/DosGlob.a lib/auto/File/Glob/Glob.a lib/auto/Filter/Util/Call/Call.a lib/auto/Hash/Util/Util.a lib/auto/Hash/Util/FieldHash/FieldHash.a lib/auto/I18N/Langinfo/Langinfo.a lib/auto/IO/IO.a lib/auto/IPC/SysV/SysV.a lib/auto/Internals/DumpArenas/DumpArenas.a lib/auto/List/Util/Util.a lib/auto/MIME/Base64/Base64.a lib/auto/Math/BigInt/FastCalc/FastCalc.a lib/auto/Opcode/Opcode.a lib/auto/POSIX/POSIX.a lib/auto/PerlIO/encoding/encoding.a lib/auto/PerlIO/mmap/mmap.a lib/auto/PerlIO/scalar/scalar.a lib/auto/PerlIO/via/via.a lib/auto/SDBM_File/SDBM_File.a lib/auto/Socket/Socket.a lib/auto/Storable/Storable.a lib/auto/Sys/Hostname/Hostname.a lib/auto/Sys/Syslog/Syslog.a lib/auto/Term/ReadKey/ReadKey.a lib/auto/Tie/Hash/NamedCapture/NamedCapture.a lib/auto/Time/HiRes/HiRes.a lib/auto/Time/Piece/Piece.a lib/auto/Unicode/Collate/Collate.a lib/auto/Unicode/Normalize/Normalize.a lib/auto/XS/APItest/APItest.a lib/auto/XS/Typemap/Typemap.a lib/auto/YAML/Safe/Safe.a lib/auto/mro/mro.a lib/auto/re/re.a lib/auto/threads/threads.a lib/auto/threads/shared/shared.a lib/auto/Encode/Byte/Byte.a lib/auto/Encode/CN/CN.a lib/auto/Encode/EBCDIC/EBCDIC.a lib/auto/Encode/JP/JP.a lib/auto/Encode/KR/KR.a lib/auto/Encode/Symbol/Symbol.a lib/auto/Encode/TW/TW.a lib/auto/Encode/Unicode/Unicode.a libperl.a `cat ext.libs` -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isExclusion'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isSingleton'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isNonStDecomp'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isComp2nd'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\n../../perl.h:7634:19: warning: type of ‘PL_nan’ does not match original declaration [-Wlto-type-mismatch]\nperl.h:7602:19: note: ‘PL_nan’ was previously declared here\n INFNAN_U8_NV_DECL PL_nan = { { DOUBLENANBYTES } };\n```","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602591917,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA0MDE3"},"target":"5072875dd2bf73dc00483a64c81fc128f82a9fbb1f8afc45de81fe4afb7687fa","message":"@rurban I tried to compile cperl with all modules in static way: `-Dstatic_ext\"B B/C Compress/Raw/Bzip2 Compress/Raw/Zlib Config Cpanel/JSON/XS Cwd Data/Dumper Devel/NYTProf Devel/PPPort Devel/Peek Digest/MD5 Digest/SHA Encode Fcntl File/DosGlob File/Glob Filter/Util/Call Hash/Util Hash/Util/FieldHash I18N/Langinfo IO IPC/SysV Internals/DumpArenas List/Util MIME/Base64 Math/BigInt/FastCalc Opcode POSIX PerlIO/encoding PerlIO/mmap PerlIO/scalar PerlIO/via SDBM_File Socket Storable Sys/Hostname Sys/Syslog Term/ReadKey Tie/Hash/NamedCapture Time/HiRes Time/Piece Unicode/Collate Unicode/Normalize XS/APItest XS/Typemap YAML/Safe mro re threads threads/shared\"`\n\nAt the end of compilation (linking time?) I got this error:\n```\ncc -o perl -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe -Wl,-E perlmain.o  lib/auto/B/B.a lib/auto/B/C/C.a lib/auto/Compress/Raw/Bzi\np2/Bzip2.a lib/auto/Compress/Raw/Zlib/Zlib.a lib/auto/Config/Config.a lib/auto/Cpanel/JSON/XS/XS.a lib/auto/Cwd/Cwd.a lib/auto/Data/Dumper/Dumper.a \nlib/auto/Devel/NYTProf/NYTProf.a lib/auto/Devel/PPPort/PPPort.a lib/auto/Devel/Peek/Peek.a lib/auto/Digest/MD5/MD5.a lib/auto/Digest/SHA/SHA.a lib/auto/Encode/Encode.a lib/auto/Fcntl/Fcntl.a lib/auto/File/DosGlob/DosGlob.a lib/auto/File/Glob/Glob.a lib/auto/Filter/Util/Call/Call.a lib/auto/Hash/Util/Util.a lib/auto/Hash/Util/FieldHash/FieldHash.a lib/auto/I18N/Langinfo/Langinfo.a lib/auto/IO/IO.a lib/auto/IPC/SysV/SysV.a lib/auto/Internals/DumpArenas/DumpArenas.a lib/auto/List/Util/Util.a lib/auto/MIME/Base64/Base64.a lib/auto/Math/BigInt/FastCalc/FastCalc.a lib/auto/Opcode/Opcode.a lib/auto/POSIX/POSIX.a lib/auto/PerlIO/encoding/encoding.a lib/auto/PerlIO/mmap/mmap.a lib/auto/PerlIO/scalar/scalar.a lib/auto/PerlIO/via/via.a lib/auto/SDBM_File/SDBM_File.a lib/auto/Socket/Socket.a lib/auto/Storable/Storable.a lib/auto/Sys/Hostname/Hostname.a lib/auto/Sys/Syslog/Syslog.a lib/auto/Term/ReadKey/ReadKey.a lib/auto/Tie/Hash/NamedCapture/NamedCapture.a lib/auto/Time/HiRes/HiRes.a lib/auto/Time/Piece/Piece.a lib/auto/Unicode/Collate/Collate.a lib/auto/Unicode/Normalize/Normalize.a lib/auto/XS/APItest/APItest.a lib/auto/XS/Typemap/Typemap.a lib/auto/YAML/Safe/Safe.a lib/auto/mro/mro.a lib/auto/re/re.a lib/auto/threads/threads.a lib/auto/threads/shared/shared.a lib/auto/Encode/Byte/Byte.a lib/auto/Encode/CN/CN.a lib/auto/Encode/EBCDIC/EBCDIC.a lib/auto/Encode/JP/JP.a lib/auto/Encode/KR/KR.a lib/auto/Encode/Symbol/Symbol.a lib/auto/Encode/TW/TW.a lib/auto/Encode/Unicode/Unicode.a libperl.a `cat ext.libs` -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isExclusion'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isSingleton'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isNonStDecomp'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isComp2nd'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\n../../perl.h:7634:19: warning: type of ‘PL_nan’ does not match original declaration [-Wlto-type-mismatch]\nperl.h:7602:19: note: ‘PL_nan’ was previously declared here\n INFNAN_U8_NV_DECL PL_nan = { { DOUBLENANBYTES } };\n```\n\nThis is not so many errors, so hopefully can be fixed easily","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602591955,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA0MTQz"},"target":"5072875dd2bf73dc00483a64c81fc128f82a9fbb1f8afc45de81fe4afb7687fa","message":"@rurban I tried to compile cperl with all modules in static way: `-Dstatic_ext\"B B/C Compress/Raw/Bzip2 Compress/Raw/Zlib Config Cpanel/JSON/XS Cwd Data/Dumper Devel/NYTProf Devel/PPPort Devel/Peek Digest/MD5 Digest/SHA Encode Fcntl File/DosGlob File/Glob Filter/Util/Call Hash/Util Hash/Util/FieldHash I18N/Langinfo IO IPC/SysV Internals/DumpArenas List/Util MIME/Base64 Math/BigInt/FastCalc Opcode POSIX PerlIO/encoding PerlIO/mmap PerlIO/scalar PerlIO/via SDBM_File Socket Storable Sys/Hostname Sys/Syslog Term/ReadKey Tie/Hash/NamedCapture Time/HiRes Time/Piece Unicode/Collate Unicode/Normalize XS/APItest XS/Typemap YAML/Safe mro re threads threads/shared\"`\n\nAt the end of compilation (linking time of the final cperl executable?) I got this error:\n```\ncc -o perl -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe -Wl,-E perlmain.o  lib/auto/B/B.a lib/auto/B/C/C.a lib/auto/Compress/Raw/Bzi\np2/Bzip2.a lib/auto/Compress/Raw/Zlib/Zlib.a lib/auto/Config/Config.a lib/auto/Cpanel/JSON/XS/XS.a lib/auto/Cwd/Cwd.a lib/auto/Data/Dumper/Dumper.a \nlib/auto/Devel/NYTProf/NYTProf.a lib/auto/Devel/PPPort/PPPort.a lib/auto/Devel/Peek/Peek.a lib/auto/Digest/MD5/MD5.a lib/auto/Digest/SHA/SHA.a lib/auto/Encode/Encode.a lib/auto/Fcntl/Fcntl.a lib/auto/File/DosGlob/DosGlob.a lib/auto/File/Glob/Glob.a lib/auto/Filter/Util/Call/Call.a lib/auto/Hash/Util/Util.a lib/auto/Hash/Util/FieldHash/FieldHash.a lib/auto/I18N/Langinfo/Langinfo.a lib/auto/IO/IO.a lib/auto/IPC/SysV/SysV.a lib/auto/Internals/DumpArenas/DumpArenas.a lib/auto/List/Util/Util.a lib/auto/MIME/Base64/Base64.a lib/auto/Math/BigInt/FastCalc/FastCalc.a lib/auto/Opcode/Opcode.a lib/auto/POSIX/POSIX.a lib/auto/PerlIO/encoding/encoding.a lib/auto/PerlIO/mmap/mmap.a lib/auto/PerlIO/scalar/scalar.a lib/auto/PerlIO/via/via.a lib/auto/SDBM_File/SDBM_File.a lib/auto/Socket/Socket.a lib/auto/Storable/Storable.a lib/auto/Sys/Hostname/Hostname.a lib/auto/Sys/Syslog/Syslog.a lib/auto/Term/ReadKey/ReadKey.a lib/auto/Tie/Hash/NamedCapture/NamedCapture.a lib/auto/Time/HiRes/HiRes.a lib/auto/Time/Piece/Piece.a lib/auto/Unicode/Collate/Collate.a lib/auto/Unicode/Normalize/Normalize.a lib/auto/XS/APItest/APItest.a lib/auto/XS/Typemap/Typemap.a lib/auto/YAML/Safe/Safe.a lib/auto/mro/mro.a lib/auto/re/re.a lib/auto/threads/threads.a lib/auto/threads/shared/shared.a lib/auto/Encode/Byte/Byte.a lib/auto/Encode/CN/CN.a lib/auto/Encode/EBCDIC/EBCDIC.a lib/auto/Encode/JP/JP.a lib/auto/Encode/KR/KR.a lib/auto/Encode/Symbol/Symbol.a lib/auto/Encode/TW/TW.a lib/auto/Encode/Unicode/Unicode.a libperl.a `cat ext.libs` -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isExclusion'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isSingleton'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isNonStDecomp'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isComp2nd'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\n../../perl.h:7634:19: warning: type of ‘PL_nan’ does not match original declaration [-Wlto-type-mismatch]\nperl.h:7602:19: note: ‘PL_nan’ was previously declared here\n INFNAN_U8_NV_DECL PL_nan = { { DOUBLENANBYTES } };\n```\n\nThis is not so many errors, so hopefully can be fixed easily","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602592883,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA3NjUw"},"target":"5072875dd2bf73dc00483a64c81fc128f82a9fbb1f8afc45de81fe4afb7687fa","message":"@rurban I tried to compile cperl with all modules in static way: `-Dstatic_ext=\"B B/C Compress/Raw/Bzip2 Compress/Raw/Zlib Config Cpanel/JSON/XS Cwd Data/Dumper Devel/NYTProf Devel/PPPort Devel/Peek Digest/MD5 Digest/SHA Encode Fcntl File/DosGlob File/Glob Filter/Util/Call Hash/Util Hash/Util/FieldHash I18N/Langinfo IO IPC/SysV Internals/DumpArenas List/Util MIME/Base64 Math/BigInt/FastCalc Opcode POSIX PerlIO/encoding PerlIO/mmap PerlIO/scalar PerlIO/via SDBM_File Socket Storable Sys/Hostname Sys/Syslog Term/ReadKey Tie/Hash/NamedCapture Time/HiRes Time/Piece Unicode/Collate Unicode/Normalize XS/APItest XS/Typemap YAML/Safe mro re threads threads/shared\"`\n\nAt the end of compilation (linking time of the final cperl executable?) I got this error:\n```\ncc -o perl -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe -Wl,-E perlmain.o  lib/auto/B/B.a lib/auto/B/C/C.a lib/auto/Compress/Raw/Bzi\np2/Bzip2.a lib/auto/Compress/Raw/Zlib/Zlib.a lib/auto/Config/Config.a lib/auto/Cpanel/JSON/XS/XS.a lib/auto/Cwd/Cwd.a lib/auto/Data/Dumper/Dumper.a \nlib/auto/Devel/NYTProf/NYTProf.a lib/auto/Devel/PPPort/PPPort.a lib/auto/Devel/Peek/Peek.a lib/auto/Digest/MD5/MD5.a lib/auto/Digest/SHA/SHA.a lib/auto/Encode/Encode.a lib/auto/Fcntl/Fcntl.a lib/auto/File/DosGlob/DosGlob.a lib/auto/File/Glob/Glob.a lib/auto/Filter/Util/Call/Call.a lib/auto/Hash/Util/Util.a lib/auto/Hash/Util/FieldHash/FieldHash.a lib/auto/I18N/Langinfo/Langinfo.a lib/auto/IO/IO.a lib/auto/IPC/SysV/SysV.a lib/auto/Internals/DumpArenas/DumpArenas.a lib/auto/List/Util/Util.a lib/auto/MIME/Base64/Base64.a lib/auto/Math/BigInt/FastCalc/FastCalc.a lib/auto/Opcode/Opcode.a lib/auto/POSIX/POSIX.a lib/auto/PerlIO/encoding/encoding.a lib/auto/PerlIO/mmap/mmap.a lib/auto/PerlIO/scalar/scalar.a lib/auto/PerlIO/via/via.a lib/auto/SDBM_File/SDBM_File.a lib/auto/Socket/Socket.a lib/auto/Storable/Storable.a lib/auto/Sys/Hostname/Hostname.a lib/auto/Sys/Syslog/Syslog.a lib/auto/Term/ReadKey/ReadKey.a lib/auto/Tie/Hash/NamedCapture/NamedCapture.a lib/auto/Time/HiRes/HiRes.a lib/auto/Time/Piece/Piece.a lib/auto/Unicode/Collate/Collate.a lib/auto/Unicode/Normalize/Normalize.a lib/auto/XS/APItest/APItest.a lib/auto/XS/Typemap/Typemap.a lib/auto/YAML/Safe/Safe.a lib/auto/mro/mro.a lib/auto/re/re.a lib/auto/threads/threads.a lib/auto/threads/shared/shared.a lib/auto/Encode/Byte/Byte.a lib/auto/Encode/CN/CN.a lib/auto/Encode/EBCDIC/EBCDIC.a lib/auto/Encode/JP/JP.a lib/auto/Encode/KR/KR.a lib/auto/Encode/Symbol/Symbol.a lib/auto/Encode/TW/TW.a lib/auto/Encode/Unicode/Unicode.a libperl.a `cat ext.libs` -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isExclusion'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isSingleton'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isNonStDecomp'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\nutf8.o (symbol from plugin): In function `nonchar_cp_format':\n(.text+0x0): multiple definition of `isComp2nd'\nNormalize.o (symbol from plugin):(.text+0x0): first defined here\n../../perl.h:7634:19: warning: type of ‘PL_nan’ does not match original declaration [-Wlto-type-mismatch]\nperl.h:7602:19: note: ‘PL_nan’ was previously declared here\n INFNAN_U8_NV_DECL PL_nan = { { DOUBLENANBYTES } };\n```\n\nThis is not so many errors, so hopefully can be fixed easily","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602592454,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcwNTcyNg==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707705726"},"message":"Maybe it's `Unicode/Normalize` module to blame. I'll try to confirm.\n\nPL_nan warning is concerning though","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602592454,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA2MDY4"},"target":"8236d56b813e22d9fafc20091a0b37f63102016662560ef80604345b11521a10","message":"Maybe it's `Unicode/Normalize` module to blame. I'll try to confirm.\n\nPL_nan warning is concerning though: it seems that two ifdef branches work and it gets defined twice:\n1. https://github.com/perl11/cperl/blob/071f7ab9813519f952e4ab7d0597927e8d32b872/perl.h#L7602\n2. https://github.com/perl11/cperl/blob/071f7ab9813519f952e4ab7d0597927e8d32b872/perl.h#L7634","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602592479,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA2MTU0"},"target":"8236d56b813e22d9fafc20091a0b37f63102016662560ef80604345b11521a10","message":"Maybe it's `Unicode/Normalize` module to blame. I'll try to confirm.\n\nPL_nan warning is concerning though: it seems that two ifdef branches trigger on my system (WSLv1, Ubuntu 18.04) and it gets defined twice:\n1. https://github.com/perl11/cperl/blob/071f7ab9813519f952e4ab7d0597927e8d32b872/perl.h#L7602\n2. https://github.com/perl11/cperl/blob/071f7ab9813519f952e4ab7d0597927e8d32b872/perl.h#L7634","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602592533,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcwODExOQ==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707708119"},"message":"The duplicate Normalize symbols are easy to fix, and should be in a seperate ticket.","files":null},{"type":6,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602592533,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzA2Mzcx"},"target":"274db81f997b0a90ed5d261f3b39dc0f85c16d838db728223ca2a40de52fe61a","message":"The duplicate Normalize symbols are easy to fix, and should be in a seperate ticket.\n\nThe nan stuff is an upstream problem, and indeed a severe bug","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602592552,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcwODgzOA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707708838"},"message":"Also, regular expression module still got put into some dynamic_ext_re","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602593405,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcxNjE0NA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707716144"},"message":"A more lightweight setup:\n```shell\n./Configure -sde -Dprefix=$PREFIX -Dstatic_ext=\"Encode Config IO Fcntl Cwd Storable Digest/MD5 List/Util Time/HiRes File/Glob PerlIO/scalar\"\nbash +x Makefile.SH\nmake -j4\n# succeeds\n\n# remove installman line\nmake install\n# fails\n```\n\n``` \nmake[1]: Leaving directory '/mnt/c/Users/user/wiptlmgr/cperl-5.30.0/cpan/Devel-NYTProf'\nManifying 1 pod document\nmake[1]: Leaving directory '/mnt/c/Users/user/wiptlmgr/cperl-5.30.0/cpan/Math-BigInt-FastCalc'\n./perl -Ilib -I. -f pod/buildtoc -q\n\n\n\n        Everything is up to date. Type 'make test' to run test suite.\n./perl -Ilib -I. installperl --destdir=\nUse of uninitialized value in XS subroutine entry at lib/File/Glob.pm line 68.\nUse of uninitialized value in XS subroutine entry at lib/File/Glob.pm line 68.\nInvalid version format (non-numeric data) at lib/File/Glob.pm line 68.\nCompilation failed in require at installperl line 394.\nBEGIN failed--compilation aborted at installperl line 394.\nMakefile:589: recipe for target 'install-all' failed\nmake: *** [install-all] Error 255\n```\n\n`lib/File/Glob.pm:68` has `XSLoader::load();`","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602593508,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzcxNzAzOA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707717038"},"message":"What is XS and how do I link it statically?","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602600055,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzc4NjAzOQ==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707786039"},"message":"Basically, static perl compiles fine (except for NaN issue), but Glob module fails:\n```\nvadimkantorov@DESKTOP-4UF8FID:/mnt/c/Users/user/wiptlmgr/cperl-5.30.0$ ./perl -Ilib -I. installperl --destdir=\nUse of uninitialized value in XS subroutine entry at lib/File/Glob.pm line 68.\nUse of uninitialized value in XS subroutine entry at lib/File/Glob.pm line 68.\nInvalid version format (non-numeric data) at lib/File/Glob.pm line 68.\nCompilation failed in require at installperl line 394.\nBEGIN failed--compilation aborted at installperl line 394.\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602600257,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzc4ODU3OA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707788578"},"message":"It seems that the reason is that XSLoader module and XSLoader::load() doesn't work well.\n\nI found XSLoader in Makefile:\n```\nDL_SRC = ext/DynaLoader/DynaLoader.xs ext/DynaLoader/dlboot.c ext/DynaLoader/dlutils.c          ext/DynaLoader/XSLoader.c\n```\nSo it seems it still wants to do dynamic loading for something. What does it try to load dynamically for globbinb? libc?","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602602684,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzgxMjc3Mw==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707812773"},"message":"Here lives that Glob.pm file: https://github.com/perl11/cperl/tree/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob\n\nIs XSLoader FFI supposed to support XSLoader::load() even if https://github.com/perl11/cperl/blob/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob/Glob.xs is compiled statically?","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602602684,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzUyNDM5"},"target":"05cec8f5e4011cac225b37dd10c505bf7dcbba825eb7480d37223703478eb407","message":"Here lives that Glob.pm file: https://github.com/perl11/cperl/tree/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob\n\nIs XSLoader FFI supposed to support XSLoader::load() even if https://github.com/perl11/cperl/blob/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob/Glob.xs is compiled statically?\n\nDisalbing usedl completely, unfortunately leads to:\n```\n/bin/ln -s xsutils.c xsutilsmini.c\n`sh  cflags \"optimize='-O3 --pipe'\" regexec.o`  regexec.c\n`sh  cflags \"optimize='-O3 --pipe'\" utf8.o`  utf8.c\n`sh  cflags \"optimize='-O3 --pipe'\" universal.o`  universal.c\n`sh  cflags \"optimize='-O3 --pipe'\" perlapi.o`  perlapi.c\nld -o generate_uudmap -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe generate_uudmap.o -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nld: unrecognized option '--pipe'\nld: use the --help option for usage information\nMakefile:367: recipe for target 'generate_uudmap' failed\n```","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602602794,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2MzUzMDEz"},"target":"05cec8f5e4011cac225b37dd10c505bf7dcbba825eb7480d37223703478eb407","message":"Here lives that Glob.pm file: https://github.com/perl11/cperl/tree/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob\n\nIs XSLoader FFI supposed to support XSLoader::load() even if https://github.com/perl11/cperl/blob/0f5b639e779cc36fc203afefe79c7810906fac65/ext/File-Glob/Glob.xs is compiled statically?\n\nDisalbing usedl completely, unfortunately leads to:\n```\n/bin/ln -s xsutils.c xsutilsmini.c\n`sh  cflags \"optimize='-O3 --pipe'\" regexec.o`  regexec.c\n`sh  cflags \"optimize='-O3 --pipe'\" utf8.o`  utf8.c\n`sh  cflags \"optimize='-O3 --pipe'\" universal.o`  universal.c\n`sh  cflags \"optimize='-O3 --pipe'\" perlapi.o`  perlapi.c\nld -o generate_uudmap -fstack-protector-strong -L/usr/local/lib -flto=4 -O3 --pipe generate_uudmap.o -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\nld: unrecognized option '--pipe'\nld: use the --help option for usage information\nMakefile:367: recipe for target 'generate_uudmap' failed\n```\n\n```\nvadimkantorov@DESKTOP-4UF8FID:/mnt/c/Users/user/wiptlmgr$ /usr/bin/ld --version\nGNU ld (GNU Binutils for Ubuntu) 2.30\nCopyright (C) 2018 Free Software Foundation, Inc.\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602605560,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzg1MDY0Mw==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707850643"},"message":"It seems that all static modules that use XSLoader have this problem: during make install or just in runtime. Here's a log of a similar problem of PerlIO/Scalar while running perlcc:\n```\n/mnt/c/Users/user/wiptlmgr/cperlprefix/bin/perlcc: Unexpected compiler output\nUse of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n Use of uninitialized value $cvname in string eq at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 4981.\n\n\n Use of uninitialized value in XS subroutine entry at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/PerlIO/scalar.pm line 4, \u003c__ANONIO__\u003e line 2459.\n Use of uninitialized value in XS subroutine entry at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/PerlIO/scalar.pm line 4, \u003c__ANONIO__\u003e line 2459.\n Invalid version format (non-numeric data) at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/PerlIO/scalar.pm line 4, \u003c__ANONIO__\u003e line 2459.\n Compilation failed in require at /mnt/c/Users/user/wiptlmgr/cperlprefix/lib/5.30.0/x86_64-linux/B/C.pm line 6225, \u003c__ANONIO__\u003e line 2459.\n CHECK failed--call queue aborted.\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602608773,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzg4MjEyNA==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707882124"},"message":"It seems that static modules also misbehave in perlcc-produced source code:\n\nCompiling without `File/Glob and PerlIO/Scalar` leads to following errors while compiling tlmgr.c produced by perlcc:\n```\n\ntlmgr.c:77:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Digest/MD5 (pTHX_ CV* cv);\n                          ^\ntlmgr.c:78:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_List/Util (pTHX_ CV* cv);\n                        ^\ntlmgr.c:79:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Time/HiRes (pTHX_ CV* cv);\n                        ^\ntlmgr.c:80:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/Byte (pTHX_ CV* cv);\n                          ^\ntlmgr.c:81:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/CN (pTHX_ CV* cv);\n                          ^\ntlmgr.c:82:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/EBCDIC (pTHX_ CV* cv);\n                          ^\ntlmgr.c:83:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/JP (pTHX_ CV* cv);\n```\ntlmgr.c source code: [tlmgr.zip](https://github.com/perl11/cperl/files/5372950/tlmgr.zip)","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602608773,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2Mzc5NjM0"},"target":"16db63798652e33f4d317e64bb6feeb6e90ec5efbae792b1928bfb2aa46a050a","message":"It seems that static modules also misbehave in perlcc-produced source code:\n\nCompiling without `File/Glob and PerlIO/Scalar` leads to following errors while compiling tlmgr.c produced by perlcc. It seems that these boot function names are not formatted well in this case.\n```\n\ntlmgr.c:77:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Digest/MD5 (pTHX_ CV* cv);\n                          ^\ntlmgr.c:78:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_List/Util (pTHX_ CV* cv);\n                        ^\ntlmgr.c:79:24: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Time/HiRes (pTHX_ CV* cv);\n                        ^\ntlmgr.c:80:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/Byte (pTHX_ CV* cv);\n                          ^\ntlmgr.c:81:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/CN (pTHX_ CV* cv);\n                          ^\ntlmgr.c:82:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/EBCDIC (pTHX_ CV* cv);\n                          ^\ntlmgr.c:83:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘/’ token\n EXTERN_C void boot_Encode/JP (pTHX_ CV* cv);\n```\ntlmgr.c source code: [tlmgr.zip](https://github.com/perl11/cperl/files/5372950/tlmgr.zip)","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602610282,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNzg4Nzk1OQ==","github-url":"https://github.com/perl11/cperl/issues/423#issuecomment-707887959"},"message":"To summarize the encountered problems:\n1. XSLoader-using modules fail when compiled statically with `Use of uninitialized value in XS subroutine entry`\n2. XSLoader is used in File/Glob which is used at install-time, leading to failing install if File/Glob is compiled statically\n3. perlcc produces malformed code for static modules init functions","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602610282,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2Mzg1MTUw"},"target":"1e313904bef8e1de89a728f67ebdf8ad755cfdcfb84f43397f2099592a9e9764","message":"To summarize the encountered problems:\n1. XSLoader-using modules fail when compiled statically with `Use of uninitialized value in XS subroutine entry`\n2. XSLoader is used in File/Glob which is used at install-time, leading to failing install if File/Glob is compiled statically\n3. perlcc produces malformed code for static modules init functions\n\nXSLoader seems to be inside DynaLoader.o package which by default is linked into libperl.a.","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602610522,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA2Mzg2MDY2"},"target":"1e313904bef8e1de89a728f67ebdf8ad755cfdcfb84f43397f2099592a9e9764","message":"To summarize the encountered problems:\n1. XSLoader-using modules fail when compiled statically with `Use of uninitialized value in XS subroutine entry`\n2. XSLoader is used in File/Glob which is used at install-time, leading to failing install if File/Glob is compiled statically\n3. perlcc produces malformed code for static modules init functions\n4. disabling dynamic module loading by `-Uusedl` fails very badly during cperl compilation\n\nXSLoader seems to be inside DynaLoader.o package which by default is linked into libperl.a.","files":null}]}