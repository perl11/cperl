{"version":1,"ops":[{"type":1,"author":{"id":"fd6229879c5dede6d2c352fa76a0837cf9d6a32a"},"timestamp":1505036784,"metadata":{"github-id":"MDU6SXNzdWUyNTY0OTc5MTI=","github-url":"https://github.com/perl11/cperl/issues/331","origin":"github"},"title":"CPANPLUS asks user to install XSLoader","message":"The function Module::Load::Conditional::check_install() returns undef for XSLoader and DynaLoader. As a consequence CPANPLUS asks the user to install these modules from CPAN. A similar problem is described in issue #52. I use the below patch to work around this problem.\n\nNote that [CPANPLUS::Module](https://github.com/jib/cpanplus-devel/blob/master/lib/CPANPLUS/Module.pm) calls check_install() with $CHECK_INC_HASH set to 0.\n\n```diff\n--- a/cpan/Module-Load-Conditional/lib/Module/Load/Conditional.pm\n+++ b/cpan/Module-Load-Conditional/lib/Module/Load/Conditional.pm\n@@ -198,6 +198,22 @@ sub check_install {\n         }\n     }\n \n+    ### Some modules are built into cperl\n+    if( !$filename \u0026\u0026 $args-\u003e{module} =~ /^(?:DynaLoader|XSLoader|coretypes)$/ ) {\n+        require Module::CoreList;\n+\n+        my $cperl_ver = Module::CoreList-\u003efind_version(\"$]c\");\n+        if( defined $cperl_ver ) {\n+            my $ver = $cperl_ver-\u003e{ $args-\u003e{module} };\n+            if( defined $ver ) {\n+                $filename = $href-\u003e{'file'} = '(builtin)';\n+                if( $FIND_VERSION ) {\n+                    $href-\u003e{version} = $ver;\n+                }\n+            }\n+        }\n+    }\n+\n     ### we didn't find the filename yet by looking in %INC,\n     ### so scan the dirs\n     unless( $filename ) {\n```","files":null}]}