{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1479285017,"metadata":{"github-id":"MDU6SXNzdWUxODk2Mjg4MDI=","github-url":"https://github.com/perl11/cperl/issues/221","origin":"github"},"title":"cv_set_call_checker in thread childs","message":"The cv_set_call_checker API may not store thread-local callback pointers. PL_check is global, and such a callback may not be used from other threads, as it will lead to segfaults. Esp. under mod_perl and modules using old signatures hacks using the cv_set_call_checker API.\nThere every ENTERSUB call will try CHECKOP, accessing the hook, which might be an invalid ptr.\n\n* Either move PL_check from G to I, interpreter-specific. \n* Or refuse to set a callback in a threaded child, only in thread id 0.","files":null}]}