{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1467734580,"metadata":{"github-id":"MDU6SXNzdWUxNjM4ODY2MzA=","github-url":"https://github.com/perl11/cperl/issues/177","origin":"github"},"title":"sig compile: -Dkv underflow","message":"`valgrind ./miniperl -Ilib -Dkv -e'sub t147 ($, $=0, $=1, $=2, $=\"foo\", $a=\"bar\", $b=\"zoot\") { \"$a:$b\" }  scalar(t147(1,2,3,4))'`\n\n=\u003e\nwith -Dkv only, at\n\n```\nDEBUG_kv(Perl_deb(aTHX_ \"ck_sig: skip action=%d pad_ix=%d items=0x%lx with %d %s op arg\\n\",\n            (int)action, (int)pad_ix, items-\u003euv, (int)arg, OP_NAME(o3)));\n```\n\nthe items is invalid. it will be incremented in the next step. so just ignore it.\n\n```\n(31964:-e:1)    ck_sig: t147 arity=1/6 actions=0x1249099617593\n(31964:-e:1)    ck_sig: skip action=3 pad_ix=0 items=0x10006 with 1 const op arg\n(31964:-e:1)    ck_sig: skip action=6 pad_ix=0 items=0x7 with 2 const op arg\n==31964== Invalid read of size 8\n==31964==    at 0x10001C57B: Perl_ck_entersub_args_signature (op.c:12391)\n==31964==    by 0x1000123F2: Perl_ck_subr (op.c:13119)\n==31964==    by 0x10001559A: Perl_newUNOP (op.c:5374)\n==31964==    by 0x10007DD51: Perl_yyparse (perly.y:979)\n==31964==    by 0x10003ACF2: perl_parse (perl.c:2401)\n==31964==    by 0x1002202E9: main (miniperlmain.c:120)\n==31964==  Address 0x100e71ab8 is 8 bytes before a block of size 64 alloc'd\n==31964==    at 0x100367520: realloc (vg_replace_malloc.c:789)\n==31964==    by 0x10004E1C0: S_sig_items_grow (toke.c:12303)\n==31964==    by 0x10007B8A7: Perl_parse_subsignature (toke.c:12599)\n==31964==    by 0x10007E2ED: Perl_yyparse (perly.y:652)\n==31964==    by 0x10003ACF2: perl_parse (perl.c:2401)\n==31964==    by 0x1002202E9: main (miniperlmain.c:120)\n==31964==\n(31964:-e:1)    ck_sig: skip action=7 pad_ix=0 items=0x0 with 3 const op arg\n(31964:-e:1)    ck_sig: skip action=8 pad_ix=0 items=0x0 with 4 const op arg\n```","files":null}]}