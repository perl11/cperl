{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1492499374,"metadata":{"github-id":"MDU6SXNzdWUyMjIzMjI1Mzg=","github-url":"https://github.com/perl11/cperl/issues/269","origin":"github"},"title":"Honor a BOM","message":"See https://rt.perl.org/Public/Bug/Display.html?id=121292\nperl5 ignores any UTF-8 BOM, but honors the two UTF-16 BOMs to be filtered.\nUTF-32 filtering is unsupported (which could be done via Encode).\n\nThe remaining problem is that a unicode BOM should imply `use utf8` and `use feature 'unicode_strings'` at compile-time, as documented before 5.26.\n\nperlunicode.pod:\n\u003e If you use a Unicode editor to edit your program, Unicode characters may\n\u003e occur directly within the literal strings in UTF-8 encoding, or UTF-16.\n\u003e (The former requires a `BOM` or `use utf8`, the latter requires a `BOM`.)\n\nWith 5.26 perl5 decided to change the documentation to match the broken implementation.\nBroken upstream with 27c74dfd9a73dc0baa42c9e37899f741b08b7c4b\n\n\u003e Wed, 26 Feb 2014 15:45:59 -0800 Ricardo SIGNES \u003crjbs@cpan.org\u003e\n\u003e The documentation is incorrect.  We should keep the current behavior of ignoring the BOM and otherwise continuing as normal.\n\n\u003e The situation is annoying from many angles, but the presence of a BOM changing the behavior of a file that may otherwise be entirely plain ol' ASCII is going to lead to real pain when debugging.  I wouldn't want an invisible sequence to start turning on utf8.pm's behavior normally, and even less so as a backward incompatible change.  UTF-8 BOMs are best ignored.  (Also, best never written out, but that's another matter.)\n\nThis is of course nonsense. A BOM enforces the encoding, if he likes it or not. And it's grossly inconsistent.\n\nTodo:\n* With a Unicode BOM add the utf8 and unicode compile-time hints. Note: These hints don't appear at run-time. So it's unlike `use utf8; use feature 'unicode_strings';`. It's only for the parse.\n* enhance and fix the bom test (the utf-16 encoding was broken for utf8 chars)","files":null}]}