{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1455441637,"metadata":{"github-id":"MDU6SXNzdWUxMzM1MjQ0MDg=","github-url":"https://github.com/perl11/cperl/issues/108","origin":"github"},"title":"ck_pad: PADSV -\u003e CONST corrupts OpSLOT","message":"cperl converts a readonly pad to a const op in ck_pad, but does not check how big the allocation\nfor the original PADSV was, (it was certainly only a OP, not a SVOP), hence the slab allocator might get corrupted which such an optimization. even better, the coretest didn't catch this, only one test in Variable::Magic t/17-ctl.t in \"die in free callback at eval STRING 1a\".\n\nFix: always overallocate a PADSV by one, so that the CONST has room for the sv.\nreallocating the padsv to a SVOP in ck_pad makes not much sense to me, as the op need to move and ptrs to it are involved.","files":null}]}