{"version":1,"ops":[{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1449827731,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ4OTE2OTM0NA=="},"added":["bug"],"removed":[]},{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1449827731,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ4OTE2OTM0Ng=="},"added":["windows"],"removed":[]},{"type":3,"author":{"id":"81b853802ee58295b1b56dc1253b74e7b177b9de"},"timestamp":1449832566,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE2MzkxMzIxMA==","github-url":"https://github.com/perl11/cperl/issues/85#issuecomment-163913210"},"message":"Finalized commit to merge in https://github.com/perl11/cperl/compare/smoke/gh85-fix_heap_corruption_VC\n\nI decided the fix is to revert it, rather add +1 to the existing +2 on the NewX call, since this API is length counted, not null term-ed and P5P never foudn this bug/applied this now reverted fix. If junk characters appear in a class name, the bug is somewhere else in the call stack.\n\nDetails.\n\n```\nTest Summary Report\n-------------------\nop/tie.t                                                        (Wstat: 0 Tests:\n 82 Failed: 1)\n  Failed test:  41\n../dist/ExtUtils-CBuilder/t/00-have-compiler.t                  (Wstat: 1280 Tes\nts: 4 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 7 tests but ran 4.\n../dist/ExtUtils-CBuilder/t/01-basic.t                          (Wstat: 1280 Tes\nts: 0 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: No plan found in TAP output\n../dist/ExtUtils-CBuilder/t/03-cplusplus.t                      (Wstat: 1280 Tes\nts: 6 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 7 tests but ran 6.\n../dist/ExtUtils-CBuilder/t/04-base.t                           (Wstat: 1280 Tes\nts: 33 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 65 tests but ran 33.\n../dist/ExtUtils-ParseXS/t/001-basic.t                          (Wstat: 1280 Tes\nts: 5 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 17 tests but ran 5.\n../dist/ExtUtils-ParseXS/t/002-more.t                           (Wstat: 1280 Tes\nts: 4 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 29 tests but ran 4.\n../dist/ExtUtils-ParseXS/t/003-usage.t                          (Wstat: 1280 Tes\nts: 4 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 24 tests but ran 4.\n../dist/Math-BigRat/t/biglog.t                                  (Wstat: 1280 Tes\nts: 9 Failed: 0)\n  Non-zero exit status: 5\n  Parse errors: Bad plan.  You planned 17 tests but ran 9.\n../ext/Config/t/Config.t                                        (Wstat: 512 Test\ns: 4 Failed: 2)\n  Failed tests:  3-4\n  Non-zero exit status: 2\n../lib/File/Copy.t                                              (Wstat: 256 Test\ns: 466 Failed: 1)\n  Failed test:  53\n  Non-zero exit status: 1\nFiles=2396, Tests=705007, 1538 wallclock secs (72.79 usr +  4.95 sys = 77.74 CPU\n)\nResult: FAIL\ndmake:  Error code 132, while making 'test'\n\nC:\\sources\\cperl\\win32\u003e\n```\n\n\"Wstat: 1280\" is AKA 0x500, 0x5 as the exit code, is actually 0xC0000005 segv code (for too many details see http://www.perlmonks.org/?node_id=1111601 ).\n\nrunning ../dist/ExtUtils-CBuilder/t/00-have-compiler.t\n\ncrash Unhandled exception at 0x77870197 (ntdll.dll) in perl.exe: 0xC0000005: Access violation reading location 0x01FE57DF.\n\nconsole is\n\n```\n1..7\nok 1 - require ExtUtils::CBuilder;\nok 2 - got CBuilder object\n'djaadjfkadjkfajdf' is not recognized as an internal or external command,\noperable program or batch file.\nok 3 - have_compiler: fake missing cc\n'djaadjfkadjkfajdf' is not recognized as an internal or external command,\noperable program or batch file.\nok 4 - have_cplusplus: fake missing c++\n```\n\n3 different crash stacks, randomly, with regular heap\n\ncurcop is https://github.com/perl11/cperl/blob/master/dist/ExtUtils-CBuilder/lib/ExtUtils/CBuilder/Platform/Windows.pm#L61\n\n```\n    ntdll.dll!_RtlpDeCommitFreeBlock@16()  Unknown\n    ntdll.dll!_RtlpCoalesceFreeBlocks@16() Unknown\n    ntdll.dll!@RtlpFreeHeap@16()   Unknown\n    ntdll.dll!_RtlFreeHeap@12()    Unknown\n    kernel32.dll!_HeapFree@12()    Unknown\n    msvcr120.dll!free(void * pBlock) Line 51    C\n    cperl522.dll!VMem::Free(void * pMem) Line 213   C++\n    cperl522.dll!PerlMemFree(IPerlMem * piPerl, void * ptr) Line 307    C++\n    cperl522.dll!Perl_safesysfree(void * where) Line 384    C\n    cperl522.dll!S_gv_stashpvn_internal(interpreter * my_perl, const char * name, unsigned long namelen, long flags) Line 1422  C\n    cperl522.dll!S_gv_stashsvpvn_cached(interpreter * my_perl, sv * namesv, const char * name, unsigned long namelen, long flags) Line 1483 C\n    cperl522.dll!Perl_sv_derived_from_pvn(interpreter * my_perl, sv * sv, const char * const name, const unsigned int len, unsigned long flags) Line 166    C\n    cperl522.dll!Perl_sv_derived_from_sv(interpreter * my_perl, sv * sv, sv * namesv, unsigned long flags) Line 111 C\n    cperl522.dll!XS_UNIVERSAL_isa(interpreter * my_perl, cv * cv) Line 349  C\n    cperl522.dll!Perl_pp_enterxssub(interpreter * my_perl) Line 3588    C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\ncurcop is https://github.com/perl11/cperl/blob/master/cpan/ExtUtils-MakeMaker/lib/ExtUtils/Mksymlists.pm#L27 eghh, this is the line being parsed, not executed right?\n\n```\n    ntdll.dll!@RtlpCreateSplitBlock@28()   Unknown\n    ntdll.dll!@RtlpAllocateHeap@24()   Unknown\n    ntdll.dll!_RtlAllocateHeap@12()    Unknown\n    ntdll.dll!@RtlpAllocateUserBlock@12()  Unknown\n    ntdll.dll!@RtlpLowFragHeapAllocFromContext@8() Unknown\n    ntdll.dll!_RtlAllocateHeap@12()    Unknown\n    msvcr120.dll!malloc(unsigned int size) Line 92  C\n    cperl522.dll!VMem::Malloc(unsigned int size) Line 151   C++\n    cperl522.dll!CPerlHost::MallocShared(unsigned int size) Line 87 C++\n    cperl522.dll!PerlMemSharedCalloc(IPerlMem * piPerl, unsigned int num, unsigned int size) Line 365   C++\n    cperl522.dll!Perl_Slab_Alloc(interpreter * my_perl, unsigned int sz) Line 288   C\n    cperl522.dll!Perl_newUNOP(interpreter * my_perl, long type, long flags, op * first) Line 4841   C\n    cperl522.dll!S_new_logop(interpreter * my_perl, long type, long flags, op * * firstp, op * * otherp) Line 7052  C\n    cperl522.dll!Perl_yyparse(interpreter * my_perl, int gramtype) Line 519 C\n    cperl522.dll!S_doeval(interpreter * my_perl, int gimme, cv * outside, unsigned long seq, hv * hh) Line 3388 C\n    cperl522.dll!Perl_pp_require(interpreter * my_perl) Line 4119   C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\ndidnt capture curcop\n\n```\n    ntdll.dll!@RtlpLowFragHeapFree@8() Unknown\n    ntdll.dll!_RtlFreeHeap@12()    Unknown\n    kernel32.dll!_HeapFree@12()    Unknown\n    msvcr120.dll!free(void * pBlock) Line 51    C\n    cperl522.dll!VMem::Free(void * pMem) Line 213   C++\n    cperl522.dll!PerlMemFree(IPerlMem * piPerl, void * ptr) Line 307    C++\n    cperl522.dll!Perl_safesysfree(void * where) Line 384    C\n    cperl522.dll!Perl_sv_clear(interpreter * my_perl, sv * const orig_sv) Line 6802 C\n    cperl522.dll!Perl_sv_free2(interpreter * my_perl, sv * const sv, const unsigned long rc) Line 7078  C\n    cperl522.dll!S_SvREFCNT_dec(interpreter * my_perl, sv * sv) Line 197    C\n    cperl522.dll!Perl_leave_scope(interpreter * my_perl, long base) Line 870    C\n    cperl522.dll!Perl_pop_scope(interpreter * my_perl) Line 104 C\n    cperl522.dll!S_sublex_done(interpreter * my_perl) Line 2557 C\n    cperl522.dll!Perl_yylex(interpreter * my_perl) Line 4526    C\n    cperl522.dll!Perl_yyparse(interpreter * my_perl, int gramtype) Line 322 C\n    cperl522.dll!S_doeval(interpreter * my_perl, int gimme, cv * outside, unsigned long seq, hv * hh) Line 3388 C\n    cperl522.dll!Perl_pp_require(interpreter * my_perl) Line 4119   C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\nwith debugging heap,\n\nconsole is\n\n```\n1..7\nok 1 - require ExtUtils::CBuilder;\nok 2 - got CBuilder object\n```\n\ncurcop is https://github.com/perl11/cperl/blob/master/dist/ExtUtils-CBuilder/lib/ExtUtils/CBuilder/Platform/Windows.pm#L61\n\n```\n    ntdll.dll!_RtlpBreakPointHeap@4()  Unknown\n    ntdll.dll!_RtlpCheckBusyBlockTail@8()  Unknown\n    ntdll.dll!_RtlpValidateHeapEntry@12()  Unknown\n    ntdll.dll!_RtlDebugFreeHeap@12()   Unknown\n    ntdll.dll!@RtlpFreeHeap@16()   Unknown\n    ntdll.dll!_RtlFreeHeap@12()    Unknown\n    kernel32.dll!_HeapFree@12()    Unknown\n    msvcr120.dll!free(void * pBlock) Line 51    C\n    cperl522.dll!VMem::Free(void * pMem) Line 213   C++\n    cperl522.dll!PerlMemFree(IPerlMem * piPerl, void * ptr) Line 307    C++\n    cperl522.dll!Perl_safesysfree(void * where) Line 384    C\n    cperl522.dll!S_gv_stashpvn_internal(interpreter * my_perl, const char * name, unsigned long namelen, long flags) Line 1422  C\n    cperl522.dll!S_gv_stashsvpvn_cached(interpreter * my_perl, sv * namesv, const char * name, unsigned long namelen, long flags) Line 1483 C\n    cperl522.dll!Perl_sv_derived_from_pvn(interpreter * my_perl, sv * sv, const char * const name, const unsigned int len, unsigned long flags) Line 166    C\n    cperl522.dll!Perl_sv_derived_from_sv(interpreter * my_perl, sv * sv, sv * namesv, unsigned long flags) Line 111 C\n    cperl522.dll!XS_UNIVERSAL_isa(interpreter * my_perl, cv * cv) Line 349  C\n    cperl522.dll!Perl_pp_enterxssub(interpreter * my_perl) Line 3588    C\n    cperl522.dll!Perl_pp_entersub(interpreter * my_perl) Line 3419  C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\n../dist/Math-BigRat/t/biglog.t\n\ncrash Unhandled exception at 0x778C28A0 (ntdll.dll) in perl.exe: 0xC0000005: Access violation reading location 0x00000005.\nregular heap\n\ncurcop not captured\n\n```\n    ntdll.dll!@RtlpCreateSplitBlock@28()   Unknown\n    ntdll.dll!@RtlpAllocateHeap@24()   Unknown\n    ntdll.dll!_RtlAllocateHeap@12()    Unknown\n    ntdll.dll!@RtlpReAllocateHeap@16() Unknown\n    ntdll.dll!_RtlReAllocateHeap@16()  Unknown\n    msvcr120.dll!realloc(void * pBlock, unsigned int newsize) Line 85   C\n    cperl522.dll!VMem::Realloc(void * pMem, unsigned int size) Line 178 C++\n    cperl522.dll!PerlMemRealloc(IPerlMem * piPerl, void * ptr, unsigned int size) Line 302  C++\n    cperl522.dll!Perl_safesysrealloc(void * where, unsigned int size) Line 270  C\n    cperl522.dll!Perl_sv_grow(interpreter * my_perl, sv * const sv, unsigned int newlen) Line 1628  C\n    cperl522.dll!Perl_sv_setpvn(interpreter * my_perl, sv * const sv, const char * const ptr, const unsigned int len) Line 4947 C\n    cperl522.dll!Perl_reg_numbered_buff_fetch(interpreter * my_perl, p5rx * const r, const long paren, sv * const sv) Line 7695 C\n    cperl522.dll!Perl_magic_get(interpreter * my_perl, sv * sv, magic * mg) Line 833    C\n    cperl522.dll!Perl_mg_get(interpreter * my_perl, sv * sv) Line 201   C\n    cperl522.dll!Perl_pp_length(interpreter * my_perl) Line 3344    C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\nwith debugging heap\n\ncurcop https://github.com/perl11/cperl/blob/master/dist/Math-BigInt/lib/Math/BigFloat.pm#L138\n\n```\n    ntdll.dll!_RtlpBreakPointHeap@4()  Unknown\n    ntdll.dll!_RtlpCheckBusyBlockTail@8()  Unknown\n    ntdll.dll!_RtlpValidateHeapEntry@12()  Unknown\n    ntdll.dll!_RtlDebugFreeHeap@12()   Unknown\n    ntdll.dll!@RtlpFreeHeap@16()   Unknown\n    ntdll.dll!_RtlFreeHeap@12()    Unknown\n    kernel32.dll!_HeapFree@12()    Unknown\n    msvcr120.dll!free(void * pBlock) Line 51    C\n    cperl522.dll!VMem::Free(void * pMem) Line 213   C++\n    cperl522.dll!PerlMemFree(IPerlMem * piPerl, void * ptr) Line 307    C++\n    cperl522.dll!Perl_safesysfree(void * where) Line 384    C\n    cperl522.dll!S_gv_stashpvn_internal(interpreter * my_perl, const char * name, unsigned long namelen, long flags) Line 1422  C\n    cperl522.dll!S_gv_stashsvpvn_cached(interpreter * my_perl, sv * namesv, const char * name, unsigned long namelen, long flags) Line 1483 C\n    cperl522.dll!Perl_sv_derived_from_pvn(interpreter * my_perl, sv * sv, const char * const name, const unsigned int len, unsigned long flags) Line 166    C\n    cperl522.dll!Perl_sv_derived_from_sv(interpreter * my_perl, sv * sv, sv * namesv, unsigned long flags) Line 111 C\n    cperl522.dll!XS_UNIVERSAL_isa(interpreter * my_perl, cv * cv) Line 349  C\n    cperl522.dll!Perl_pp_enterxssub(interpreter * my_perl) Line 3588    C\n    cperl522.dll!Perl_runops_standard(interpreter * my_perl) Line 41    C\n    cperl522.dll!S_run_body(interpreter * my_perl, long oldscope) Line 2487 C\n    cperl522.dll!perl_run(interpreter * my_perl) Line 2410  C\n    cperl522.dll!RunPerl(int argc, char * * argv, char * * env) Line 257    C++\n    perl.exe!__tmainCRTStartup() Line 626   C\n    kernel32.dll!@BaseThreadInitThunk@12() Unknown\n    ntdll.dll!___RtlUserThreadStart@8()    Unknown\n    ntdll.dll!__RtlUserThreadStart@8() Unknown\n```\n\nDr memory also reports the problem.\n\n```\nNEW THREAD: main thread 6848\n\nError #1: UNADDRESSABLE ACCESS beyond heap bounds: writing 0x12a7763d-0x12a7763e 1 byte(s)\n# 0 cperl522.dll!S_gv_stashpvn_internal [c:\\sources\\cperl\\gv.c:1420] (0x276a4b15 \u003ccperl522.dll+0x94b15\u003e) modid:2\n# 1 cperl522.dll!S_gv_stashsvpvn_cached [c:\\sources\\cperl\\gv.c:1483] (0x276a4cc6 \u003ccperl522.dll+0x94cc6\u003e) modid:2\n# 2 cperl522.dll!Perl_sv_derived_from_pvn [c:\\sources\\cperl\\universal.c:166] (0x276dbc5a \u003ccperl522.dll+0xcbc5a\u003e) modid:2\n# 3 cperl522.dll!Perl_sv_derived_from_sv [c:\\sources\\cperl\\universal.c:111] (0x276dbb9b \u003ccperl522.dll+0xcbb9b\u003e) modid:2\n# 4 cperl522.dll!XS_UNIVERSAL_isa [c:\\sources\\cperl\\universal.c:349] (0x276dc0ab \u003ccperl522.dll+0xcc0ab\u003e) modid:2\n# 5 cperl522.dll!Perl_pp_enterxssub [c:\\sources\\cperl\\pp_hot.c:3585] (0x276a1ef7 \u003ccperl522.dll+0x91ef7\u003e) modid:2\n# 6 cperl522.dll!Perl_pp_entersub [c:\\sources\\cperl\\pp_hot.c:3419] (0x276a1a1d \u003ccperl522.dll+0x91a1d\u003e) modid:2\n# 7 cperl522.dll!Perl_runops_standard [c:\\sources\\cperl\\run.c:41] (0x276d9cbb \u003ccperl522.dll+0xc9cbb\u003e) modid:2\n# 8 cperl522.dll!Perl_call_sv [c:\\sources\\cperl\\win32\\perl.c:2794] (0x276ab12a \u003ccperl522.dll+0x9b12a\u003e) modid:2\n# 9 cperl522.dll!Perl_call_sv [c:\\sources\\cperl\\win32\\perl.c:2789] (0x276ab0b1 \u003ccperl522.dll+0x9b0b1\u003e) modid:2\n#10 cperl522.dll!Perl_call_list [c:\\sources\\cperl\\win32\\perl.c:4917] (0x276adcbd \u003ccperl522.dll+0x9dcbd\u003e) modid:2\n#11 cperl522.dll!S_process_special_blocks [c:\\sources\\cperl\\win32\\op.c:8971] (0x276577b6 \u003ccperl522.dll+0x477b6\u003e) modid:2\n#12 cperl522.dll!Perl_newATTRSUB_x [c:\\sources\\cperl\\win32\\op.c:8901] (0x27657574 \u003ccperl522.dll+0x47574\u003e) modid:2\n#13 cperl522.dll!Perl_utilize [c:\\sources\\cperl\\win32\\op.c:6090] (0x27652a8c \u003ccperl522.dll+0x42a8c\u003e) modid:2\n#14 cperl522.dll!Perl_yyparse [c:\\sources\\cperl\\win32\\perly.y:351] (0x276d62ab \u003ccperl522.dll+0xc62ab\u003e) modid:2\n#15 cperl522.dll!S_parse_body [c:\\sources\\cperl\\win32\\perl.c:2335] (0x276aa785 \u003ccperl522.dll+0x9a785\u003e) modid:2\n#16 cperl522.dll!perl_parse   [c:\\sources\\cperl\\win32\\perl.c:1637] (0x276a9ef9 \u003ccperl522.dll+0x99ef9\u003e) modid:2\n#17 cperl522.dll!perl_parse   [c:\\sources\\cperl\\win32\\perl.c:1634] (0x276a9dec \u003ccperl522.dll+0x99dec\u003e) modid:2\n#18 cperl522.dll!RunPerl      [c:\\sources\\cperl\\win32\\perllib.c:250] (0x276e767e \u003ccperl522.dll+0xd767e\u003e) modid:2\n#19 __tmainCRTStartup [f:\\dd\\vctools\\crt\\crtw32\\dllstuff\\crtexe.c:626] (0x00c31216 \u003ccperl.exe+0x1216\u003e) modid:1\nNote: @0:01:14.137 in thread 6848\nNote: next higher malloc: 0x12a77938-0x12a77958\nNote: refers to 0 byte(s) beyond last valid byte in prior malloc\nNote: prev lower malloc:  0x12a77558-0x12a7763d\nNote: instruction: mov    $0x00 -\u003e 0x02(%esi,%ebp)\n    error end\n\nError #2: UNADDRESSABLE ACCESS beyond heap bounds: writing 0x12db6c95-0x12db6c96 1 byte(s)\n# 0 cperl522.dll!S_gv_stashpvn_internal [c:\\sources\\cperl\\gv.c:1420] (0x276a4b15 \u003ccperl522.dll+0x94b15\u003e) modid:2\n# 1 cperl522.dll!S_gv_stashsvpvn_cached [c:\\sources\\cperl\\gv.c:1483] (0x276a4cc6 \u003ccperl522.dll+0x94cc6\u003e) modid:2\n# 2 cperl522.dll!Perl_sv_derived_from_pvn [c:\\sources\\cperl\\universal.c:166] (0x276dbc5a \u003ccperl522.dll+0xcbc5a\u003e) modid:2\n# 3 cperl522.dll!Perl_sv_derived_from_sv [c:\\sources\\cperl\\universal.c:111] (0x276dbb9b \u003ccperl522.dll+0xcbb9b\u003e) modid:2\n# 4 cperl522.dll!XS_UNIVERSAL_isa [c:\\sources\\cperl\\universal.c:349] (0x276dc0ab \u003ccperl522.dll+0xcc0ab\u003e) modid:2\n# 5 cperl522.dll!Perl_pp_enterxssub [c:\\sources\\cperl\\pp_hot.c:3585] (0x276a1ef7 \u003ccperl522.dll+0x91ef7\u003e) modid:2\n# 6 cperl522.dll!Perl_runops_standard [c:\\sources\\cperl\\run.c:41] (0x276d9cbb \u003ccperl522.dll+0xc9cbb\u003e) modid:2\n# 7 cperl522.dll!Perl_call_sv [c:\\sources\\cperl\\win32\\perl.c:2794] (0x276ab12a \u003ccperl522.dll+0x9b12a\u003e) modid:2\n# 8 cperl522.dll!Perl_call_sv [c:\\sources\\cperl\\win32\\perl.c:2789] (0x276ab0b1 \u003ccperl522.dll+0x9b0b1\u003e) modid:2\n# 9 cperl522.dll!Perl_call_list [c:\\sources\\cperl\\win32\\perl.c:4917] (0x276adcbd \u003ccperl522.dll+0x9dcbd\u003e) modid:2\n#10 cperl522.dll!S_process_special_blocks [c:\\sources\\cperl\\win32\\op.c:8971] (0x276577b6 \u003ccperl522.dll+0x477b6\u003e) modid:2\n#11 cperl522.dll!Perl_newATTRSUB_x [c:\\sources\\cperl\\win32\\op.c:8901] (0x27657574 \u003ccperl522.dll+0x47574\u003e) modid:2\n#12 cperl522.dll!Perl_utilize [c:\\sources\\cperl\\win32\\op.c:6090] (0x27652a8c \u003ccperl522.dll+0x42a8c\u003e) modid:2\n#13 cperl522.dll!Perl_yyparse [c:\\sources\\cperl\\win32\\perly.y:351] (0x276d62ab \u003ccperl522.dll+0xc62ab\u003e) modid:2\n#14 cperl522.dll!S_parse_body [c:\\sources\\cperl\\win32\\perl.c:2335] (0x276aa785 \u003ccperl522.dll+0x9a785\u003e) modid:2\n#15 cperl522.dll!perl_parse   [c:\\sources\\cperl\\win32\\perl.c:1637] (0x276a9ef9 \u003ccperl522.dll+0x99ef9\u003e) modid:2\n#16 cperl522.dll!perl_parse   [c:\\sources\\cperl\\win32\\perl.c:1634] (0x276a9dec \u003ccperl522.dll+0x99dec\u003e) modid:2\n#17 cperl522.dll!RunPerl      [c:\\sources\\cperl\\win32\\perllib.c:250] (0x276e767e \u003ccperl522.dll+0xd767e\u003e) modid:2\n#18 __tmainCRTStartup [f:\\dd\\vctools\\crt\\crtw32\\dllstuff\\crtexe.c:626] (0x00c31216 \u003ccperl.exe+0x1216\u003e) modid:1\n#19 KERNEL32.dll!BaseThreadInitThunk (0x75e03c45 \u003cKERNEL32.dll+0x53c45\u003e) modid:8\nNote: @0:01:14.522 in thread 6848\nNote: next higher malloc: 0x12db7288-0x12db7694\nNote: refers to 0 byte(s) beyond last valid byte in prior malloc\nNote: prev lower malloc:  0x12db6ba0-0x12db6c95\nNote: instruction: mov    $0x00 -\u003e 0x02(%esi,%ebp)\n    error end\n```","files":null},{"type":3,"author":{"id":"81b853802ee58295b1b56dc1253b74e7b177b9de"},"timestamp":1449833252,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE2MzkxNTE5MA==","github-url":"https://github.com/perl11/cperl/issues/85#issuecomment-163915190"},"message":"I also have pics from debugger showing the overflow.\n\nfresh malloc block with debugging heap poison patterns\n![freshmalloc](https://cloud.githubusercontent.com/assets/997168/11742547/d528e72e-9fce-11e5-90a4-22210fafa769.png)\n\nafter copy 2 bytes left in alloc block specifically 0xab and 0xee, IDK what 0xee means, EE as in FEEE  but right after the next byte is ab, so does EE mean \"last valid byte of your alloc, as in \"End\"\" or does it mean, \"it is allocated to you due to because you malloed 1 byte, but you really allocated 8 and you dont know it, so we marked 7 bytes with EE, to mean, you own them, but you can't use them\". IDK. I ve never seen a lone EE byte like that until today.\n\n![after copy 2 bytes left in alloc block specifically 0xab and 0xee](https://cloud.githubusercontent.com/assets/997168/11742546/d528a7e6-9fce-11e5-9239-48f65f302603.png)\n\nafter 2nd colon write\n\n![after 2nd colon write](https://cloud.githubusercontent.com/assets/997168/11742545/d524269e-9fce-11e5-8e74-26a356c18d31.png)\n\nafter null byte write heap is now corrupted 0xab guard byte was overwritten\n\n![after null byte write heap is now corrupted 0xab guard byte was overwritten](https://cloud.githubusercontent.com/assets/997168/11742548/d52ccd1c-9fce-11e5-8967-0b817dbab34c.png)","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1449843605,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE2Mzk0NjM5OA==","github-url":"https://github.com/perl11/cperl/issues/85#issuecomment-163946398"},"message":"Merged to master, thanks","files":null},{"type":4,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1449843605,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDg5MzgwNTcy"},"status":2}]}