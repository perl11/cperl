{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1459094404,"metadata":{"github-id":"MDU6SXNzdWUxNDM4MjMyOTI=","github-url":"https://github.com/perl11/cperl/issues/117","origin":"github"},"title":"protect hash iter with a changed hash","message":"When iterating over a hash, check if the hash structure was changed while iterating over it (by side effect or a thread).\nDisallow any changes to hash keys while iterating over them.\n    =\u003e error \"Attempt to change hash while iterating over it\"\n\nInternally uses HvAUX timestamp fields, bumped on each change. This is safer than the last_rand field.\n\nAdd a new `use hashiter` pragma to allow changes as previously while iterating over the hash.\n\nOriginally I even forbid changing values. For now we disallow insert and deletion, even with deferred LAZYDEL.\nNeed to test many CPAN modules, and provide distroprefs patches.\n\nNote: This was CM-663","files":null}]}