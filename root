{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1506153612,"metadata":{"github-id":"MDU6SXNzdWUyNTk5OTE0ODY=","github-url":"https://github.com/perl11/cperl/issues/334","origin":"github"},"title":"optimize normalization tables","message":"`dist/Unicode-Normalize/mkheader`, the created tables are horribly unoptimized. see also #332 \n\nadded `-ind`, `-uni` and `-utf16` options. `-ind` for indirection tables, `-uni` for not using utf8 values, `-utf16` for `sizeof(wchar_t)==2` systems (mostly windows, cygwin) creating the needed surrogate pairs. create seperate files for these.\n\n* canon can be shrinked to be 3x smaller by merging unique values and reference to them via a short.\nlengths:  (917,762,227,36) with enough room for the 3 length bits and the offset to fit into a uint16 short.\n\n* compat maybe also with some tricks.  it has the lengths  (1664,1190,638,109,16,14,1,1).\n1664=0x680, room for 0x7ff offsets, and 5 length bits. (2^5 = 31 lengths).\nuse no sentinels, the array size is known at compiletime.\n\n* compos needs to use shorts instead of int32 codepoints for the first 425 of 441 tables, with only the last 16 needing 32bit ints.\n\non `sizeof(wchar_t)==2` systems (windows, cygwin, and aix/solaris 32bit) create the normalization tables with surrogate pairs already.","files":null}]}