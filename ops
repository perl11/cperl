{"version":1,"ops":[{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602104687,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0Mzg4MTAyNzg="},"target":"076d6f337927ade42c37abdd56ac74781a638fb83b124d66dac35451cecc663b","message":"On my machine this script leads to `no makefile found` (and indeed, only `Makefile.micro` exists which errors out as well):\n```shell\nPERL=https://github.com/perl11/cperl/releases/download/cperl-5.30.0/cperl-5.30.0.tar.gz\nwget -nc $PERL\ntar xfz $(basename $PERL)\nPREFIX=$PWD/cperlprefix\nmkdir -p $PREFIX\ncd cperl-5.30.0\n./Configure -sde -Dprefix=$PREFIX\nmake -j4\n```\n\nMy platform is Ubuntu 18.04 on WSLv1. Typically this is sufficient for building all programming language runtimes.\n\n```\n...\nExtracting cflags (with variable substitutions)\nNot re-extracting config.h\nExtracting makedepend (with variable substitutions)\nExtracting Makefile (with variable substitutions)\nExtracting myconfig (with variable substitutions)\nExtracting pod/Makefile (with variable substitutions)\nExtracting Policy.sh (with variable substitutions)\nExtracting runtests (with variable substitutions)\nConfigure done.\n\nIf you compile cperl on a different machine or from a different object\ndirectory, copy the Policy.sh file from this object directory to the\nnew one before you run Configure -- this will help you with most of\nthe policy defaults.\n\nmake: *** No targets specified and no makefile found.  Stop.\n```\n\n```\nmake -f Makefile.micro\ncc -c -o ugenerate_uudmap.o -DPERL_CORE -DPERL_MICRO -DPERL_USE_SAFE_PUTENV -DNO_MATHOMS  generate_uudmap.c\ncc -o ugenerate_uudmap  ugenerate_uudmap.o -lm\n./ugenerate_uudmap uuudmap.h ubitcount.h umg_data.h\ncc -c -o ugv.o -DPERL_CORE -DPERL_MICRO -DPERL_USE_SAFE_PUTENV -DNO_MATHOMS  gv.c\nIn file included from iperlsys.h:51:0,\n                 from perl.h:3844,\n                 from gv.c:36:\nperlio.h:32:4: error: #error \"stdio is no longer supported as the default base layer -- use perlio.\"\n #  error \"stdio is no longer supported as the default base layer -- use perlio.\"\n    ^~~~~\nMakefile.micro:89: recipe for target 'ugv.o' failed\nmake: *** [ugv.o] Error 1\n```\n\nContext: I am looking to use perlcc / RPerl to convert tlmgr from TexLive into C/C++ code, so I thought to install locally a recent, updated Perl distribution - cperl.","files":null},{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602108014,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM4NTI2NzUxNTI="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602108047,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTIxNjcwOQ==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705216709"},"message":"WSLv1, hmm. Never tried this one. Need to hear around what happens there.","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602109748,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTIyNjYyNg==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705226626"},"message":"That's a linux subsystem for Windows. Not sure if that matters.\n\nIf you can suggest, where to put debug prints in ./Configure, I can do some debug printing","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602109748,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjIyMzA0"},"target":"afe652355abcb2f14f98062760cc04e7a1bdc38fc84737917e933dbd5231629c","message":"That's an syscall-emulated linux subsystem for Windows. Not sure if that matters. Most of user-space things work and build from source fine there.\n\nIf you can suggest, where to put debug prints in ./Configure, I can do some debug printing","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602109762,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjIyMzM3"},"target":"afe652355abcb2f14f98062760cc04e7a1bdc38fc84737917e933dbd5231629c","message":"That's an syscall-emulated linux subsystem for Windows. Not sure if that matters. Most of user-space things work and build from source fine there (all programming languages, etc)\n\nIf you can suggest, where to put debug prints in ./Configure, I can do some debug printing","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602109777,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjIyMzc4"},"target":"afe652355abcb2f14f98062760cc04e7a1bdc38fc84737917e933dbd5231629c","message":"That's an syscall-emulated linux subsystem on Windows. Not sure if that matters. Most of user-space things work and build from source fine there (all programming languages, etc)\n\nIf you can suggest, where to put debug prints in ./Configure, I can do some debug printing","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602111455,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTIzNTcxNA==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705235714"},"message":"I ran `bash +x Makefile.SH` and `strace -f bash Makefile.sh`, output is attached\n[cperl-5.30.0.zip](https://github.com/perl11/cperl/files/5344405/cperl-5.30.0.zip)","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602111455,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjI2Mzg0"},"target":"d6a369a76a5127b6d70b024274e53c76457ae3a34191229b17f3e82ec0e068cc","message":"I ran `bash -x Makefile.SH` and `strace -f bash Makefile.sh`, output is attached\n[cperl-5.30.0.zip](https://github.com/perl11/cperl/files/5344405/cperl-5.30.0.zip)","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602111634,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjI2ODQ2"},"target":"d6a369a76a5127b6d70b024274e53c76457ae3a34191229b17f3e82ec0e068cc","message":"I ran `bash -x Makefile.SH` and `strace -f bash Makefile.sh`, output is attached\n[cperl-5.30.0.zip](https://github.com/perl11/cperl/files/5344405/cperl-5.30.0.zip)\n\n```\n++ osname=linux\n++ osvers=4.4.0-19041-microsoft\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602114593,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTI0ODI3Nw==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705248277"},"message":"A full log of running Configure \n[log.zip](https://github.com/perl11/cperl/files/5344536/log.zip)","files":null},{"type":6,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602114593,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjMzOTk3"},"target":"1ee97313d199be6fb0be76c092e7bf3bf7fd4a12ce11e5cf4d94da712cd07c25","message":"A full `bash -x` log of running Configure \n[log.zip](https://github.com/perl11/cperl/files/5344536/log.zip)","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602137183,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTM1MDMzMQ==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705350331"},"message":"I think the problem is a case-insensitive filesystem under linux.\nWe write to Makefile, but then `rm -f makefile`, i.e. `$rm -f $firstmakefile` in Makefile.SH\n\nCan you try commenting out this line?\n\n(See the very end of bash,txt)\n\nA fix would need to probe for a case-insensitve filesystem, store it in config and don't do this line.","files":null},{"type":6,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1602137183,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA1MjgwNDI3"},"target":"26dbe1921ae3eac73fd584c8c9e767305227a1ab98124f09a1f481fa1e2ce06d","message":"I think the problem is a case-insensitive filesystem under linux.\nWe write to Makefile, but then `rm -f makefile`, i.e. `$rm -f $firstmakefile` in Makefile.SH\n\nCan you try commenting out this line?\n\n(See the very end of bash,txt)\n\nA fix would need to probe for a case-insensitve filesystem, store it in config and don't do this line.\n\nAnother temp. fix would be\n```\n# for case-insensitive filesystems (ie WSL)\nmv Makefile Makefile.new\n$rm -f $firstmakefile\nmv Makefile.new Makefile\n```","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602152844,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTQ3OTg5NQ==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705479895"},"message":"This helped to get Makefile generated! Thank you! I'll post here how it compiles (given that Makefile.micro does not compile)","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602155064,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTQ5NjY0Nw==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705496647"},"message":"Btw, is it expected that microperl complains about perlio?","files":null},{"type":3,"author":{"id":"edd4a52cf511ff1423c949b0ca917b5a179bdeac"},"timestamp":1602155260,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNTQ5ODIyMw==","github-url":"https://github.com/perl11/cperl/issues/424#issuecomment-705498223"},"message":"`make` succeeds. `make install` works and then prints:\n```\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man3/version.3\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man3/version::Internals.3\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man3/vmsish.3\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man3/warnings.3\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man3/warnings::register.3\n  /mnt/c/Users/user/wiptlmgr/cperlprefix/man/man1/assemble.1\nreadline() on closed filehandle $fh at installman line 115.\n```\nnot sure if it's expected or not","files":null}]}