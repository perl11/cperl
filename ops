{"version":1,"ops":[{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1496878748,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwNjk1NjQ1MQ==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-306956451"},"message":"Fantastic! I'll check","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1497774800,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwOTI2NDI4Ng==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-309264286"},"message":"* id:000000,sig:06,src:023772,op:havoc,rep:16 FIXED\n* id:000001,sig:06,src:024259,op:arith8,pos:5,val:+27 FIXED\n\n5.27.x: Either correct panic: constant overflowed allocated space, 31 \u003e= 24 at id:000000,sig:06,src:023772,op:havoc,rep:16 line 1. \nor Assertion failed: (isUTF8_CHAR((U8 *) s, (U8 *) send)), function S_scan_const, file toke.c, line 4128.\n\n5.26.0c, and perl5.2[67] just reports a syntax error.\n\n* id:000001,sig:11,src:017300+020757,op:splice,rep:64-minimized\n\nSEGV in all 5.2[67] DEBUGGING variants, perl and cperl. **security relevant**.\nregex stack exhaustion by unbounded recursion. Fixed by adding depth limit of 5000 open nested parens. Older perls failed with an unhelpful Unmatched ( in regex error.\n\n* id:000099,sig:11,src:027197,op:havoc,rep:4\n\ncperl regression with 5.27. Aborts or asserts. Caused by inconsistent TOKENBUF_SIZE and\npads being now all utf8 in cperl.\n\n* id:000113,sig:06,src:029639+026337,op:splice,rep:4\n* id:000142,sig:11,src:027004,op:havoc,rep:32\n\ncperl regression. Should error with Identifier too long.\nCaused by inconsistent TOKENBUF_SIZE and pads being now all utf8 in cperl.\n\n* id:000162,sig:06,src:026278+031045,op:splice,rep:32\n\npanic: constant overflowed allocated space, 173 \u003e= 168 or isUTF8_CHAR assert. Ok I assume.\nperl errors with Unescaped left brace in regex is illegal","files":null},{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1497780728,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDExMjgwOTI3MDg="},"added":["blocking"],"removed":[]},{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1497780728,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDExMjgwOTI3MDk="},"added":["bug"],"removed":[]},{"type":4,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1497791837,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTEyODEzMTkzMg=="},"status":2},{"type":3,"author":{"id":"f20369cd12989ead5980ab088b02f38ca4421855"},"timestamp":1498062157,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMDEzMTg3MQ==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-310131871"},"message":"@rurban I tested the input files against a rebuilt master (35886a1e694a266d576d33d8cc289ce147ea5106) and still saw segmentation faults.  Are these changes fully integrated in the master branch?\n\nI can re-do testing on a new git clone and post gdb output if you think it'll help.","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1498083316,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMDIyMDY4MA==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-310220680"},"message":"Yes, I thought I fixed all of them. Which one is still segfaulting?","files":null},{"type":4,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1498083316,"metadata":{"github-id":"MDEzOlJlb3BlbmVkRXZlbnQxMTMzNzc3NDYw"},"status":1},{"type":3,"author":{"id":"f20369cd12989ead5980ab088b02f38ca4421855"},"timestamp":1498093170,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMDI0NTkxOA==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-310245918"},"message":"1 - `id:000001,sig:06,src:024259,op:arith8,pos:5,val:+27`\n```\nMalformed UTF-8 character: \\xff\\x80\\x00\\x00\\x00\\xc2\\xc2\\xc2\\x9f\\xc2\\x3e\\x80\\xdf (unexpected non-continuation byte 0x00, 2 bytes after start byte 0xff; need 13 bytes, got 2) at id:000001,sig:06,src:024259,op:arith8,pos:5,val:+27 line 1.\nperl: malloc.c:3760: _int_malloc: Assertion `(unsigned long) (size) \u003e= (unsigned long) (nb)' failed.\nAborted (core dumped)\n```\nwith gdb backtrace of:\n```\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007f57940243fa in __GI_abort () at abort.c:89\n#2  0x00007f57940669c8 in __malloc_assert (assertion=assertion@entry=0x7f57941562d0 \"(unsigned long) (size) \u003e= (unsigned long) (nb)\",\n    file=file@entry=0x7f5794152867 \"malloc.c\", line=line@entry=3760, function=function@entry=0x7f57941568e0 \u003c__func__.11500\u003e \"_int_malloc\") at malloc.c:301\n#3  0x00007f57940696f9 in _int_malloc (av=av@entry=0x7f5794389b00 \u003cmain_arena\u003e, bytes=bytes@entry=2) at malloc.c:3760\n#4  0x00007f579406af34 in __GI___libc_malloc (bytes=2) at malloc.c:2928\n#5  0x00000000004c3146 in Perl_safesysmalloc (size=1) at util.c:157\n#6  0x00000000004f2c6d in Perl_sv_grow (sv=0x2885b40, newlen=\u003coptimized out\u003e) at sv.c:1658\n#7  0x00000000004f5fd0 in Perl_sv_setpvn (sv=0x2885b40, ptr=0x5de9a9 \"\", len=0) at sv.c:5063\n#8  0x00000000005003d6 in Perl_newSVpvn_flags (s=\u003coptimized out\u003e, len=\u003coptimized out\u003e, flags=\u003coptimized out\u003e) at sv.c:9436\n#9  0x00000000004c5408 in S_mess_alloc () at util.c:1192\n#10 Perl_vmess (pat=\u003coptimized out\u003e, args=\u003coptimized out\u003e) at util.c:1476\n#11 Perl_vcroak (pat=0x5e4035 \"panic: constant overflowed allocated space, %lu \u003e= %lu\", args=\u003coptimized out\u003e) at util.c:1709\n#12 Perl_croak (pat=0x5e4035 \"panic: constant overflowed allocated space, %lu \u003e= %lu\") at util.c:1756\n#13 0x000000000047ef9c in S_scan_const (start=\u003coptimized out\u003e) at toke.c:4178\n#14 Perl_yylex () at toke.c:5243\n#15 0x000000000048c516 in Perl_yyparse (gramtype=\u003coptimized out\u003e) at perly.c:338\n#16 0x0000000000453028 in S_parse_body (env=\u003coptimized out\u003e, xsinit=\u003coptimized out\u003e) at perl.c:2504\n#17 perl_parse (my_perl=\u003coptimized out\u003e, xsinit=\u003coptimized out\u003e, argc=\u003coptimized out\u003e, argv=\u003coptimized out\u003e, env=\u003coptimized out\u003e) at perl.c:1722\n#18 0x000000000042a2f1 in main (argc=0, argv=0x7f5794022fcf \u003c__GI_raise+207\u003e, env=\u003coptimized out\u003e) at perlmain.c:121\n```\n\n\n2 - `id:000162,sig:06,src:026278+031045,op:splice,rep:32`\n```\nMalformed UTF-8 character: \\x90 (unexpected continuation byte 0x90, with no preceding start byte) at id:000162,sig:06,src:026278+031045,op:splice,rep:32 line 1.\npanic: constant overflowed allocated space, 173 \u003e= 168 at id:000162,sig:06,src:026278+031045,op:splice,rep:32 line 1.\n*** Error in `/root/cperl/perl': double free or corruption (!prev): 0x0000000000928660 ***\n[[[ more output snipped ]]]\n```\n\ngdb backtrace:\n```\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007fbb1c49f3fa in __GI_abort () at abort.c:89\n#2  0x00007fbb1c4dbbd0 in __libc_message (do_abort=do_abort@entry=2, fmt=fmt@entry=0x7fbb1c5d0dd0 \"*** Error in `%s': %s: 0x%s ***\\n\")\n    at ../sysdeps/posix/libc_fatal.c:175\n#3  0x00007fbb1c4e1f96 in malloc_printerr (action=3, str=0x7fbb1c5d0e48 \"double free or corruption (!prev)\", ptr=\u003coptimized out\u003e, ar_ptr=\u003coptimized out\u003e)\n    at malloc.c:5049\n#4  0x00007fbb1c4e27de in _int_free (av=0x7fbb1c804b00 \u003cmain_arena\u003e, p=0x9199e0, have_lock=0) at malloc.c:3905\n#5  0x00000000004c3288 in Perl_safesysfree (where=0x2) at util.c:393\n#6  0x00000000005251c0 in Perl_leave_scope (base=\u003coptimized out\u003e) at scope.c:1219\n#7  0x0000000000454b42 in S_my_exit_jump () at perl.c:5405\n#8  0x00000000004570ea in Perl_my_failure_exit () at perl.c:5389\n#9  0x000000000052db63 in Perl_die_unwind (msv=\u003coptimized out\u003e) at pp_ctl.c:1820\n#10 0x00000000004c54ca in Perl_vcroak (pat=0x5e4035 \"panic: constant overflowed allocated space, %lu \u003e= %lu\", args=\u003coptimized out\u003e) at util.c:1711\n#11 Perl_croak (pat=0x5e4035 \"panic: constant overflowed allocated space, %lu \u003e= %lu\") at util.c:1756\n#12 0x000000000047ef9c in S_scan_const (start=\u003coptimized out\u003e) at toke.c:4178\n#13 Perl_yylex () at toke.c:5243\n#14 0x000000000048c516 in Perl_yyparse (gramtype=\u003coptimized out\u003e) at perly.c:338\n#15 0x0000000000453028 in S_parse_body (env=\u003coptimized out\u003e, xsinit=\u003coptimized out\u003e) at perl.c:2504\n#16 perl_parse (my_perl=\u003coptimized out\u003e, xsinit=\u003coptimized out\u003e, argc=\u003coptimized out\u003e, argv=\u003coptimized out\u003e, env=\u003coptimized out\u003e) at perl.c:1722\n#17 0x000000000042a2f1 in main (argc=0, argv=0x7fbb1c49dfcf \u003c__GI_raise+207\u003e, env=\u003coptimized out\u003e) at perlmain.c:121\n```","files":null},{"type":3,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1498122630,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMDMyMzEyMg==","github-url":"https://github.com/perl11/cperl/issues/293#issuecomment-310323122"},"message":"Fixed the 2 utf8 errors which segv in the error handler in cc56c5e76fa82e4cbadd842d7a7ff6256bab6576\n\nbut the new 2017-06-19 dir has many more. Working on these now","files":null},{"type":4,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1498287448,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTEzNzM3ODUwMA=="},"status":2}]}