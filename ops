{"version":1,"ops":[{"type":1,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1459069221,"metadata":{"github-id":"MDU6SXNzdWUxNDM3ODk2NzE=","github-url":"https://github.com/perl11/cperl/issues/116","origin":"github"},"title":"Fix wrong d_u32align probe, esp. for intel 64bit","message":"Intel CPU do allow unaligned access to word pointers, which allows more cache sensitive code, but is 2x slower on out of cache memory access. \n\nperl5 core took over the wrong Digest-MD5 probe in 2001 with 4e0554ec1a41c5b5d840b8e29e149a0efe77a52c which produced the wrong strict result on intel 64bit, and it was never checked.\n\nMy fix adds a SIGBUS on intel (with gnu c compatible compilers: gcc, clang, icc) when accessing unaligned word pointers. To help finding regressions on strict machines, which are rarely tested, and to help performance on intel with U32_ALIGNMENT_REQUIRED, which is not yet used, but needed e.g. for hash or assembly functions.\n\nSee also \n- https://github.com/gisle/digest-md5/pull/13\n- the fix in https://github.com/perl11/cperl/commits/smoke/align-sigbus\n- the explanation at http://orchistro.tistory.com/206","files":null}]}