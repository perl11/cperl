{"version":1,"ops":[{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1444035369,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQyNjU1NTMyMQ=="},"added":["enhancement"],"removed":[]},{"type":5,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1444035369,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQyNjU1NTMyMw=="},"added":["compiler"],"removed":[]},{"type":2,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1444035477,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDI2NTU2NjE5"},"title":"static AV/HV/CV","was":"static AV/HV/CV"},{"type":3,"author":{"id":"8a3f768860c499ce02b36d7faf871cb06d3d7d79"},"timestamp":1499791825,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNDUwNTMxOA==","github-url":"https://github.com/perl11/cperl/issues/63#issuecomment-314505318"},"message":"We've done some extensive work with CV/RV and we've determined that you have to be VERY careful not to call $cv-\u003eGV when $cv-\u003eNAME_HEK is true. Doing so coerces the parent of the $cv into a GV from an RV. Which leaves you in a broken state for compiling. \n\nCvGV by design coerces RVs into GVs.\n\nHopefully this sub will relate all the pitfalls we had to deal with related to this.\n\n```\nsub FULLNAME {\n    my ($cv) = @_;\n\n    #return q{PL_main_cv} if $cv eq ${ main_cv() };\n    # Do not coerce a RV into a GV during compile by calling $cv-\u003eGV on something with a NAME_HEK (RV)\n    my $name = $cv-\u003eNAME_HEK;\n    return $name if ($name);\n\n    my $gv = $cv-\u003eGV;\n    return q{SPECIAL} if ref $gv eq 'B::SPECIAL';\n\n    return $gv-\u003eFULLNAME;\n}","files":null},{"type":4,"author":{"id":"04135dc995e2fdcd322aaf4268dbf04630a3cc7c"},"timestamp":1500037463,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTE2NDI0OTY2Mw=="},"status":2}]}